---
title: Lecture hors ligne avec la description des SDK du lecteur natif : Dans cette rubrique, vous apprendrez comment fonctionne la lecture hors ligne avec les SDK Brightcove Native Player.
parent: Features 
grandparent: Home
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>

<section class="bcls-section">
<h2 id="Overview">Aperçu</h2>

<p>La lecture hors ligne avec les SDK Brightcove Native Player pour iOS et Android permet aux éditeurs d'atteindre leurs téléspectateurs de manière entièrement nouvelle tout en garantissant que leur contenu reste sécurisé. Nos SDK offrent des solutions puissamment simples pour les problèmes complexes de lecture hors ligne, notamment la gestion des téléchargements, la gestion des catalogues hors ligne, l'analyse, les DRM et bien sûr la lecture.</p>

<p>En utilisant la lecture hors ligne, les utilisateurs peuvent télécharger du contenu vidéo protégé par DRM et clair (non crypté) sur leurs appareils et le regarder lorsqu'ils ne sont pas connectés.</p>

<!-- <aside class="bcls-aside bcls-aside--tip">To use this feature, you need to be a Video Cloud customer using Dynamic Delivery.</aside> -->
</section>

<section class="bcls-section">
<h2 id="Requirements">Conditions</h2>

<p>Les SDK Brightcove Native Player prennent en charge la lecture hors ligne avec les versions suivantes :</p>

<h3>Version du SDK natif Brightcove</h3>
<ul>
	<li>SDK natif pour iOS 6.0.1+</li>
	<li>SDK natif pour Android 5.0.3+</li>
</ul>

<h3>Version du système d'exploitation de l'appareil</h3>
<ul>
	<li>iOS 10.0+, mais 10.3+ est recommandé</li>
	<li>Android 5.0+</li>
</ul>
</section>

<section class="bcls-section">
<h2 id="Requirements">Installer</h2>

<p>Pour commencer, procédez comme suit :</p>
<ul>
	<li>Contactez votre gestionnaire de compte pour activer votre compte pour la lecture hors ligne.</li>
	<li>Assurez-vous d'utiliser Dynamic Delivery lors de l'ingestion de vos vidéos.</li>
  <li><a href="#Prepare_videos">Préparez chaque vidéo</a> que vous souhaitez activer pour le téléchargement.</li>
</ul>
</section>

<section class="bcls-section">
<h2 id="Content_delivery">Livraison de contenu</h2>

<p>La vidéo en streaming profite de la fonction de streaming multi-débit de Video Cloud qui détecte la bande passante à la source et offre la meilleure qualité pour l'appareil. La fonction de lecture hors ligne prend en charge les types de diffusion suivants :</p>

<ul>
	<li><strong>Android</strong>: Diffusion dynamique adaptative sur HTTP (DASH)</li>
	<li><strong>iOS</strong>: Diffusion en direct HTTP Apple (HLS)</li>
</ul>
</section>

<section class="bcls-section">
<h2 id="Security">Sécurité</h2>

<p>La protection du contenu téléchargé est une priorité avec notre solution hors ligne. Les kits de développement logiciel Brightcove Native Player fournissent les fonctionnalités suivantes pour garantir que votre contenu est stocké en toute sécurité sur les visionneuses' dispositifs:</p>

<h3>Contenu protégé par DRM</h3>

<ul>
	<li>Pour le contenu protégé par DRM, les SDK natifs utilisent les technologies suivantes :
	<ul>
		<li><strong>Android</strong>: DASH avec <a href="https://castlabs.com/company/partners/google-widevine/">Modulaire Widevine</a></li>
		<li>
		<p><strong>iOS</strong>: HLS avec <a href="https://developer.apple.com/streaming/fps/">Fair-play</a></p>
		</li>
	</ul>
	</li>
	<li>
	<p>Le contenu vidéo ne peut être regardé que sur l'appareil et l'application qui a téléchargé le contenu.</p>
	</li>
	<li>
	<p>Le contenu vidéo ne peut être regardé que jusqu'à une date et une heure d'expiration spécifiques.</p>

	<p>Les SDK natifs permettent aux utilisateurs de louer ou d'acheter des vidéos. L'expiration s'applique aux locations et est définie dans la licence DRM à l'aide de l'API Native SDK pour le téléchargement de vidéos. En revanche, l'expiration définie dans le jeton Fastly s'applique au contenu en streaming.</p>
	</li>
	<li>Les URL des vidéos renvoyées au client expireront afin que d'autres ne puissent pas les utiliser.</li>
</ul>

<h3>Tout le contenu</h3>

<ul>
	<li>Lorsque l'application est supprimée, tout le contenu téléchargé est supprimé. <aside class="bcls-aside bcls-aside--information">Pour Android, cela est vrai tant que l'emplacement de stockage par défaut n'est pas remplacé.</aside>
	</li>
	<li>Votre application peut supprimer à tout moment le contenu stocké localement.</li>
</ul>
</section>

<section class="bcls-section">
<h2 id="Download_management">Gestion des téléchargements</h2>

<p>Les kits de développement logiciel Brightcove Native Player gèrent les complexités du téléchargement de contenu sur l'appareil d'un spectateur, simplifiant considérablement le processus pour les applications natives.</p>

<ul>
	<li>Les éditeurs peuvent choisir la qualité de rendu du contenu à télécharger.</li>
	<li>Les sous-titres peuvent être téléchargés et affichés hors ligne.</li>
	<li>Plusieurs pistes audio sont prises en charge par les SDK natifs. Pour plus d'informations sur le téléchargement de pistes supplémentaires, consultez les sections suivantes :
	<ul>
		<li><a href="/android/playback/multiple-audio-tracks-offline-playback-native-sdk-android.html">Plusieurs pistes audio pour la lecture hors ligne avec le SDK natif pour Android</a></li>
		<li><a href="https://github.com/brightcove/brightcove-player-sdk-ios/blob/master/OfflinePlayback.md#downloading-secondary-tracks">Guide du développeur d'applications iOS pour la lecture hors ligne</a>.</li>
	</ul>
	</li>
</ul>

<h3>Fonctionnalité</h3>

<p>Les fonctionnalités suivantes peuvent être ajoutées à vos applications pour prendre en charge la gestion des téléchargements :</p>

<ul>
	<li><a href="#Display_content">Afficher le contenu</a></li>
	<li><a href="#Check_download_size">Vérifier la taille du téléchargement</a></li>
	<li><a href="#Show_download_status">Afficher l'état du téléchargement</a></li>
	<li><a href="#Manage_downloads">Gérer les téléchargements</a></li>
	<li><a href="#Show_local_storage_space">Afficher l'espace de stockage local</a></li>
	<li><a href="#Pause_resume_cancel_download">Suspendre/reprendre/annuler le téléchargement</a></li>
</ul>

<h3 id="Display_content">Afficher le contenu</h3>

<p>Affichez une liste de contenus disponibles en streaming ou en téléchargement.</p>

<p>Lorsque vous définissez une vidéo <code translate="No">offline_enabled</code> propriété à <strong>vrai</strong> , les SDK natifs marqueront cette vidéo comme téléchargeable.</p>

<h4 id="Prepare_videos">Préparer des vidéos</h4>

<p>Pour marquer une vidéo comme téléchargeable, vous devez procéder comme suit :</p>

<ol class="bcls-tasklist">
	<li>Si vous ne l'avez pas déjà fait, contactez votre gestionnaire de compte pour activer votre compte pour la lecture hors ligne.</li>
	<li>
	<p>Pour chaque vidéo que vous souhaitez télécharger, activez l'option hors connexion en effectuant l'une des opérations suivantes :</p>

	<h4>Utiliser Video Cloud Studio</h4>

	<p>Utilisez Video Cloud Studio pour <a href="https://studio.support.brightcove.com/media/editing-video-properties-using-media-module.html#videoinfo">activer la lecture hors ligne</a>.</p>

	<figure class="bcls-figure"><img class="bcls-image--no-border" alt="Offline enabled" src="/assets/images/getting-started/offline/offline-enabled.png" />
	<figcaption class="bcls-caption--image">Hors ligne activé</figcaption>
	</figure>

	<h4>Utiliser l'API CMS</h4>

	<p>Vous pouvez également utiliser le <a href="https://apis.support.brightcove.com/cms/getting-started/overview-cms-api.html">API CMS</a> pour régler le <a href="https://apis.support.brightcove.com/cms/references/cms-api-video-fields-reference.html">offline_enabled</a> champ à une valeur de <strong>vrai</strong>.</p>

	<p>Voici un exemple utilisant curl :</p>

	<pre class="line-numbers" data-start="1">
  <code class="language-json" translate="No">curl --header "Authorization: Bearer $oauth_token" --request PATCH --data '
  {"offline_enabled" : true}
  ' https://cms.api.brightcove.com/v1/accounts/<span class="bcls-input">your account id</span>/videos/<span class="bcls-input">your video id</span></code></pre>
	</li>
</ol>

<figure class="bcls-figure"><img class="bcls-image--no-border" alt="Display content" src="/assets/images/getting-started/offline/content-list.png" />
<figcaption class="bcls-caption--image">Afficher le contenu</figcaption>
</figure>

<p>Lorsque vous travaillez avec un contenu clair, consultez le <a href="#Best_practices">Les meilleures pratiques</a> section pour obtenir des conseils sur la façon d'afficher votre contenu.</p>

<h3 id="Check_download_size">Vérifier la taille du téléchargement</h3>

<p>Brightcove recommande qu'avant de demander un téléchargement, vous vous assurez qu'il y a suffisamment d'espace dans le stockage de l'appareil pour le téléchargement. Pour obtenir une estimation de la taille totale du téléchargement de la vidéo, procédez comme suit :</p>

<ul>
	<li>Pour iOS, passez en revue les informations dans le <strong>Vérifier la taille du téléchargement</strong> partie de la <a href="https://github.com/brightcove/brightcove-player-sdk-ios/blob/master/OfflinePlayback.md#check-download-size">Guide du développeur d'applications iOS pour la lecture hors ligne</a>.</li>
	<li>
	<p>Pour Android, vous pouvez obtenir un devis dans le <a href="/android/reference/javadoc/com/brightcove/player/offline/MediaDownloadable.DownloadEventListener.html#onDownloadStarted-com.brightcove.player.model.Video-long-java.util.Map-"> SurTéléchargementDémarré</a> rappel du <code translate="No">DownloadEventListener</code>. Voici un exemple de configuration de l'écouteur d'événement :</p>

	<pre>
  <code class="language-java" translate="No">MediaDownloadable.DownloadEventListener downloadEventListener = new MediaDownloadable.DownloadEventListener() {
  //Your implementation.
  }
  OfflineCatalog catalog = new OfflineCatalog(context, eventEmitter, accountId, policyKey);
  catalog.addDownloadEventListener(downloadEventListener);</code></pre>
	</li>
</ul>

<p>&nbsp;</p>

<h3 id="Show_local_storage_space">Afficher l'espace de stockage local</h3>

<p>Informez l'utilisateur lorsqu'il n'y a pas assez de stockage local pour terminer le téléchargement de l'élément actuel et de tout élément dans la file d'attente.</p>

<p>Les SDK fournissent la taille et la progression estimées afin que vous puissiez déterminer s'il y a suffisamment d'espace pour les téléchargements.</p>
<!-- <figure class="bcls-figure">
      <img class="bcls-image--no-border" src="//learning-services-media.brightcove.com/doc-assets/device-sdks/guides/odrm/download-space.png" alt="Local storage space">
      <figcaption class="bcls-caption--image">Local storage space</figcaption>
      </figure> -->

<h3 id="Show_download_status">Afficher l'état du téléchargement</h3>

<p>Affichez le téléchargement en cours ainsi que son statut.</p>

<p>La taille totale estimée, l'état actuel du téléchargement et le pourcentage d'informations sur la progression du téléchargement seront renvoyés par les SDK.</p>
<!-- <figure class="bcls-figure"><img class="bcls-image--no-border" alt="Download status" src="//learning-services-media.brightcove.com/doc-assets/device-sdks/guides/odrm/download-progress.png" />
      <figcaption class="bcls-caption--image">Download status</figcaption>
      </figure> -->

<aside class="bcls-aside bcls-aside--tip">Pour les appareils Android, l'état du téléchargement est également affiché dans la zone de notification. Le titre de la notification est défini sur le titre de la vidéo. La notification est supprimée si le téléchargement est interrompu ou annulé. Pour plus de détails, consultez le <a href="/android/resources/code-snippets-using-native-sdk-android.html#Offline_playback_with_DRM">Extraits de code utilisant le SDK natif pour Android</a> document.</aside>

<h3 id="Manage_downloads">Gérer les téléchargements</h3>

<h4>Téléchargement de plusieurs vidéos</h4>

<p>Les SDK natifs permettront la mise en file d'attente de plusieurs vidéos pour les téléchargements. Par exemple, un utilisateur peut télécharger plusieurs épisodes d'une saison et les SDK natifs géreront le processus en fournissant le statut de téléchargement pour chaque élément.</p>

<aside class="bcls-aside bcls-aside--information">Si votre application cible iOS 11.0 - 11.2, nous ne recommandons pas les téléchargements simultanés, car le comportement de pause et de reprise n'est pas fiable avec plusieurs téléchargements simultanés. Le problème a été résolu avec iOS 11.3.</aside>
<!-- <figure class="bcls-figure">
      <img class="bcls-image--no-border" src="//learning-services-media.brightcove.com/doc-assets/device-sdks/guides/odrm/download-queue.png" alt="Download queue">
      <figcaption class="bcls-caption--image">Download queue</figcaption>
      </figure> -->

  <h4>Téléchargement de pistes secondaires (iOS)</h4>
  <p>
    Avec iOS 13, Apple a changé le fonctionnement des téléchargements. Pour plus de détails, consultez le <a href="https://github.com/brightcove/brightcove-player-sdk-ios/blob/master/OfflinePlayback.md#downloading-secondary-tracks">Guide du développeur d'applications iOS pour le téléchargement de vidéos et la lecture hors ligne</a> guider.
  </p>
  <p>
    En raison de ce changement, l'exemple d'application de téléchargement hors ligne iOS peut sembler télécharger à nouveau des vidéos avec plusieurs pistes audio. En effet, la progression du téléchargement est indiquée pour chaque piste. Ainsi, la barre de progression recommencera à zéro pour chaque piste audio supplémentaire.
  </p>
  <p>
    Voici un bref aperçu de <code translate="No">AVMediaSelectionOptions</code> , sous-titres et pistes audio alternatives : <a href="https://developer.apple.com/documentation/avfoundation/media_playback_and_selection/adding_subtitles_and_alternative_audio_tracks?preferredLanguage=occ">Ajout de sous-titres et de pistes audio alternatives</a>
  </p>
  <h5>Déterminer le téléchargement total</h5>
  <p>
    Y a-t-il un moyen d'obtenir <code translate="No">didProgressTo</code> pour un téléchargement total pour un jeton vidéo ?
  </p>
  <p>
    Non. Pour un jeton vidéo hors ligne, il n'y a pas de valeur de progression de téléchargement agrégée. Le développeur de l'application détermine le nombre de téléchargements d'actifs. Le premier téléchargement d'actif est la vidéo principale et les pistes audio et texte préférées. Il s'agit généralement du plus gros téléchargement et la progression passera de 0,00 à 100,00.
  </p>
  <p>
    Si une demande de téléchargement comprend des sélections de médias supplémentaires (que le développeur de l'application demande explicitement), la durée totale de téléchargement est simplement celle de la vidéo principale et de la sélection de médias préférée, plus celle de chaque sélection de médias supplémentaire. Lorsque vous représentez la progression totale dans l'interface utilisateur, choisissez une valeur d'échelle pour chaque téléchargement de sorte que la somme de tous les téléchargements totalise 100 % et additionne les temps de téléchargement mis à l'échelle de chaque sélection de média.
  </p>

  <h5>Identifier les types d'objets</h5>
  <p>
    Existe-t-il un moyen d'identifier quel type d'objet (vidéo ou piste de texte) chacun <code translate="No">didProgressTo</code> événements liés?
  </p>
  <p>
    Oui. Les téléchargements supplémentaires sont des objets Apple Media Selection Option (<code translate="No">AVMediaSelectionOption</code>), pas des pistes. L'objet de sélection de média en cours de téléchargement est identifié dans le rappel de progression. (<a href="/ios/reference/sdk/Protocols/BCOVOfflineVideoManagerDelegate.html#//api/name/offlineVideoToken:aggregateDownloadTask:didProgressTo:forMediaSelection:">BCOVOfflineVideoManagerDelegate.h</a>)
  </p>
  <p>
    Apple fournit des méthodes pour examiner les attributs d'une option de sélection de média. Pour plus de détails, voir Apple <a href="https://developer.apple.com/documentation/avfoundation/avmediaselectionoption">AVMediaSelectionOption</a>.
  </p>
  <p>
    Vous pouvez voir les valeurs des métadonnées dans la console du débogueur Xcode lors de l'exécution du <a href="https://github.com/BrightcoveOS/ios-player-samples/tree/master/Offline">Exemple d'application OfflinePlayer</a> (ne vous laissez pas tromper par les deux options en anglais - ce n'est qu'un exemple d'application)
  </p>
  <pre class="line-numbers">
<code class="language-objectivec" translate="No">OfflinePlayer[523:355259] AVMediaSelection option 0 | legible display name: English
OfflinePlayer[523:355259] AVMediaSelection option 0 | audible display name: English
OfflinePlayer[523:355259] AVMediaSelection option 1 | legible display name: English
OfflinePlayer[523:355259] AVMediaSelection option 1 | audible display name: English</code></pre>
<p>
  Vous pouvez voir comment cela se fait dans le <a href="https://github.com/BrightcoveOS/ios-player-samples/blob/master/Offline/OfflinePlayer/objc/OfflinePlayer/ManagersUtilities/DownloadManager.m#L253-L262">Code du gestionnaire de téléchargement</a>.
</p>


<h3 id="Pause_resume_cancel_download">Suspendre/reprendre/annuler le téléchargement</h3>

<p>Autorisez l'utilisateur à suspendre, reprendre ou annuler le téléchargement de contenu.</p>

<p>La fonctionnalité de téléchargement reprendra là où elle s'était arrêtée si l'utilisateur s'interrompt/reprend ou si le téléchargement est interrompu. Par exemple, si vous perdez la connexion Wi-Fi pendant le téléchargement, elle reprendra là où elle s'était arrêtée lorsque vous vous reconnecterez.</p>

<p>Si vous annulez le téléchargement d'une vidéo, toute progression effectuée sera effacée.</p>
<!-- <figure class="bcls-figure"><img class="bcls-image--no-border" alt="Pause/resume/cancel download" src="//learning-services-media.brightcove.com/doc-assets/device-sdks/guides/odrm/download-cancelled.png" />
      <figcaption class="bcls-caption--image">Pause/resume/cancel download</figcaption>
      </figure> --></section>

<section class="bcls-section">
<h2 id="Local_catalog_management">Gestion du catalogue local</h2>

<p>Les kits de développement logiciel Brightcove Native Player simplifient le processus de gestion du contenu local téléchargé.</p>

<p>Les fonctionnalités suivantes peuvent être ajoutées à vos applications pour prendre en charge la gestion de catalogue local :</p>

<ul>
	<li><a href="#Show_downloaded_content">Afficher le contenu téléchargé</a></li>
	<li><a href="#Play_local_content">Lire du contenu local</a></li>
	<li><a href="#Delete_local_content">Supprimer le contenu local</a></li>
</ul>

<h3 id="Show_downloaded_content">Afficher le contenu téléchargé</h3>

<p>Afficher tous les épisodes téléchargés pour chaque émission/saison.</p>

<p>Les SDK renvoient des métadonnées et des détails de lecture pour tout le contenu téléchargé. Ces métadonnées incluent le titre de la vidéo, la description, les vignettes, les légendes disponibles, les pistes audio disponibles, etc.</p>

<p>Il existe de nouvelles propriétés de métadonnées spécifiques à la lecture hors connexion, notamment :</p>

<h4>Contenu protégé par DRM</h4>

<ul>
	<li>Identifiant du jeton</li>
	<li>Date d'expiration de la licence</li>
</ul>

<h4>Tout le contenu</h4>

<ul>
	<li>Heure de début et de fin du téléchargement</li>
	<li>Nom de la vignette téléchargée avec son URL de fichier</li>
	<li>Nom de l'affiche téléchargée avec son URL de fichier</li>
	<li>URL de fichier relative et dérivée du bundle vidéo</li>
</ul>

<p>Vous pouvez ensuite filtrer les résultats pour votre implémentation spécifique.</p>

<aside class="bcls-aside bcls-aside--tip">Vous pourrez voir le temps restant pour une licence de location.</aside>

<h3 id="Delete_local_content">Supprimer le contenu local</h3>

<p>Autoriser les utilisateurs à supprimer du contenu du stockage local.</p>

<p>Les SDK exposent une méthode pour supprimer une vidéo ainsi que ses métadonnées et les ressources associées.</p>
</section>

<section class="bcls-section">
<h2 id="Content_playback">Lecture de contenu</h2>

<p>Les SDK natifs vous permettent de lire du contenu dans les situations suivantes :</p>

<ul>
	<li>Lire une vidéo pendant son téléchargement.</li>
	<li>Lire une vidéo après son téléchargement. Le contenu téléchargé peut être lu localement lorsque l'appareil est hors ligne ou en ligne. La vidéo hors ligne ne peut être lue qu'à partir du stockage local.</li>
	<li>Si vous choisissez de diffuser une version en ligne de la vidéo, vous devez récupérer un nouvel objet vidéo à partir du service de lecture.</li>
</ul>
</section>

<section class="bcls-section">
<h2 id="Analytics">Analytique</h2>

<p>Des analyses ont été introduites pour mesurer les données liées au flux hors ligne. Pour plus de détails, consultez le <a href="/android/analytics/analytics-related-offline-playback-native-sdks.html">Analyses liées à la lecture hors ligne avec les SDK natifs</a> document.</p>
</section>

<section class="bcls-section">
<h2 id="Samples">Échantillons</h2>

<p>Le tableau suivant contient des liens vers des exemples de code pour vous montrer comment démarrer avec la lecture hors connexion :</p>

<table class="bcls-table">
	<thead class="bcls-table__head">
		<tr>
			<th style="width:25%">Exemple d'application</th>
			<th style="width:75%">La description</th>
		</tr>
	</thead>
	<tbody class="bcls-table__body">
		<tr>
			<td><a href="https://github.com/BrightcoveOS/ios-player-samples/tree/master/Offline">Lecture hors ligne iOS</a></td>
			<td>Téléchargez et lisez des vidéos HLS, y compris celles protégées par le cryptage FairPlay. Pour plus de détails sur les développeurs, consultez le <a href="https://github.com/brightcove/brightcove-player-sdk-ios/blob/master/OfflinePlayback.md">Guide des développeurs d'applications iOS pour la lecture hors ligne</a>.</td>
		</tr>
		<tr>
			<td><a href="https://github.com/BrightcoveOS/android-player-samples/tree/master/brightcove-exoplayer/OfflinePlaybackSampleApp">Lecture hors ligne Android</a></td>
			<td>Téléchargez et lisez des vidéos DASH, y compris celles protégées par le cryptage Widevine.</td>
		</tr>
	</tbody>
</table>
</section>

<section class="bcls-section">
<h2 id="FAQ">FAQ</h2>

<p>Vous trouverez ci-dessous des réponses à quelques questions générales.</p>

<h3>Contenu protégé par DRM</h3>
<details style="padding:0;">
    <summary style="font-size:1.25em;">L'utilisateur peut-il modifier l'horloge système pour contourner la date d'expiration ?</summary>
    <p ><strong>Android</strong>: L'expiration absolue détermine la date et l'heure jusqu'à laquelle une licence est valide. Ceci est appliqué par Widevine et la couche Android DRM. Théoriquement, la couche DRM d'Android doit empêcher l'utilisateur de contourner la période d'expiration. Tous les problèmes que nous avons pu trouver sont décrits dans les notes de version du système d'exploitation Android.<br />
    <br />
    <strong>iOS</strong>: L'expiration de la licence est imposée par FairPlay. iOS gère toutes les vérifications des changements d'horloge, etc. Une application a la possibilité de vérifier l'expiration de la licence pour alerter l'utilisateur que la licence a expiré. Cela peut être préférable à la simple lecture d'une vidéo expirée, puis à la réception d'une erreur de lecture.</p>
<!-- <p class="bcls-answer">Absolute expiration determines the date and time until which a license is valid. This is enforced by Widevine and the Android DRM layer. Theoretically, the DRM layer in Android must prevent the user from bypassing the expiration period. Any issues that we may have found is described in the <a href="/android/reference/release-notes.txt">Native SDK for Android release notes</a>.</p> -->
</details>
<br/>

<details style="padding:0;">
    <summary style="font-size:1.25em;">La licence et les vidéos hors ligne continueront-elles à se charger pendant que l'application est en arrière-plan ?</summary>
    <p><strong>Android</strong>: Oui. En règle générale, la licence est téléchargée immédiatement, mais même la licence peut être téléchargée pendant que l'application est en arrière-plan.<br />
    <br />
    <strong>iOS</strong>: Le chargement de la licence doit se faire au premier plan. Nous avons un <a href="https://github.com/brightcove/brightcove-player-sdk-ios/blob/master/ios/dynamic/BrightcovePlayerSDK.framework/Headers/BCOVOfflineVideoManager.h#L631">méthode pour précharger la licence</a>. Le téléchargement du contenu vidéo principal peut se produire lorsque l'application est en arrière-plan.</p>
<!-- <p class="bcls-answer">License loading should happen in the foreground. We have a method to preload the license.
      Downloading of the main video content can happen while the app is in the background.</p> -->
</details>

<h3>Tout le contenu</h3>
<details style="padding:0;">
    <summary style="font-size:1.25em;">Quel est le format vidéo utilisé pour télécharger du contenu hors connexion ?</summary>
    <p><strong>Android</strong>: DASH protégé par DRM ou DASH non crypté.<br />
    <br />
    <strong>iOS</strong>: HLS vapeur. Vous pouvez spécifier un débit binaire pour le téléchargement afin d'utiliser une variante spécifique.</p>
</details>
<br/>

<details style="padding:0;">
    <summary style="font-size:1.25em;">Les vidéos téléchargées seront-elles lues localement ou en streaming lorsque l'utilisateur est en ligne ?</summary>
    <p>Une vidéo téléchargée peut être lue en ligne ou hors ligne, mais elle utilisera toujours la vidéo téléchargée. Si vous choisissez de lire une version en ligne de la vidéo, vous devez récupérer un nouvel objet vidéo à partir du service de lecture. La vidéo hors ligne ne peut être lue qu'à partir du stockage local.</p>
</details>
<br/>



<p class="bcls-question"></p>


</section>

<section class="bcls-section">
<h2 id="Best_practices">Les meilleures pratiques</h2>

<p>Les instructions suivantes devraient vous aider lors du développement de votre application pour une lecture hors ligne.</p>

<h3>Affichage des boutons pause/annulation</h3>

<p>Les boutons de pause et d'annulation doivent s'afficher lorsque le téléchargement de la vidéo a commencé.</p>

<p>Android:<strong></strong> Vous devez afficher les boutons de pause et d'annulation dans le cadre de l'appel du <code translate="No">onDownloadStarted</code> rappel dans le <code translate="No">DownloadEventListener</code>. Pour plus de détails, consultez le <a href="https://github.com/BrightcoveOS/android-player-samples/tree/master/brightcove-exoplayer/OfflinePlaybackSampleApp">Exemple d'application de lecture hors ligne</a>.</p>

<p><strong>iOS :</strong> Pour plus d'informations sur la création d'une application pour la lecture hors ligne, consultez le <a href="https://github.com/brightcove/brightcove-player-sdk-ios/blob/master/OfflinePlayback.md">Guide du développeur d'applications iOS</a>.</p>

<h3>Afficher un contenu clair</h3>

<p>Si votre compte n'est pas compatible DRM ou si vous travaillez avec un contenu clair, les kits SDK natifs Brightcove n'effectueront pas de demande de licence côté serveur. Par conséquent, un contenu clair n'est pas considéré comme disponible à la location ou à l'achat. Dans la plupart des cas, pour un contenu clair, il est recommandé de masquer le <strong>louer</strong> et <strong>acheter</strong> boutons et afficher un seul <strong>Télécharger</strong> bouton à la place.</p>
</section>

<section class="bcls-section">
<h2 id="Enabling_the_feature">Activer la fonctionnalité</h2>

<p>Contactez votre responsable de compte pour en savoir plus sur les tarifs et pour activer la fonction de lecture hors ligne pour votre compte.</p>
</section>

<section class="bcls-section">
<h2 id="Troubleshooting">Dépannage</h2>

<p>Les conseils suivants peuvent vous aider à enquêter sur les problèmes lors du téléchargement de vidéos.</p>

<p>Une erreur peut se produire lorsqu'un utilisateur essaie de télécharger une ressource à un débit supérieur à celui que l'appareil peut gérer en raison d'un réseau lent.</p>

<p>Pour éviter cela, vous pouvez ajouter du code pour vérifier les capacités de l'appareil et empêcher les appareils sur des connexions lentes de tenter de télécharger des actifs à haut débit. Vous pouvez tester avec un appareil réel tout en limitant la connexion et afficher le trafic réseau avec le <a href="https://www.charlesproxy.com/">Mandataire Charles</a> outil.</p>

<h3>Android</h3>

<p>Pour plus de détails sur la gestion des erreurs, consultez le <a href="/android/troubleshooting/error-messages-native-sdk-android.html">Messages d'erreur du SDK natif pour Android</a> document. Cela inclut les messages d'erreur liés à la lecture hors ligne.</p>

<h3>iOS</h3>

<p>Pour plus de détails sur la gestion des erreurs, consultez le <a href="/ios/troubleshooting/error-handling-native-sdk-ios.html">Gestion des erreurs avec le SDK natif pour iOS</a> document.</p>

<p>Lorsque le code de lecture hors ligne reçoit une erreur, nous l'attrapons et lançons une NSError. Pour obtenir l'erreur sous-jacente, vous pouvez essayer ceci :</p>

<pre class="line-numbers">
  <code class="language-objectivec" translate="No">NSError *underlyingError = initialError.userInfo[NSUnderlyingErrorKey];</code></pre>

<p>Pour plus d'informations, consultez le <a href="https://github.com/brightcove/brightcove-player-sdk-ios/blob/master/OfflinePlayback.md">Guide des développeurs d'applications iOS pour la lecture hors ligne</a>.</p>
</section>

<section class="bcls-section">
<h2 id="Known_issues">Problèmes connus</h2>

<p>Pour obtenir une liste des problèmes connus pour les systèmes d'exploitation Android et iOS qui affectent la lecture hors ligne avec les SDK natifs, consultez le <a href="/developer-support/questions/known-issues-brightcove-native-player-sdks.html">Problèmes connus</a> document d'appui.</p>
</section>

<section class="bcls-section">
  <h2 id="Notes_and_limitations">Remarques et limitations</h2>
  
  <p>Les remarques suivantes s'appliquent à la fonctionnalité de lecture hors ligne prise en charge par les SDK natifs :</p>
  
  <h3>Publicité</h3>
  <p>Ni la publicité côté client ni côté serveur n'est prise en charge avec la lecture hors ligne.</p>
  
  <h3>HLSe</h3>
  <p>Le contenu HLSe n'est pas pris en charge avec la lecture hors ligne à l'aide du Brightcove Native SDK pour Android, iOS ou tvOS.</p>
  
  <h3>Mode faible consommation</h3>
  <p>Le mode faible consommation sur les appareils peut affecter certaines fonctionnalités, notamment le téléchargement. Pour plus d'informations, consultez les éléments suivants :</p>
  <ul>
    <li><a href="https://developer.android.com/about/versions/pie/power">Gestion de l'alimentation Android 9 (API niveau 28)</a></li>
    <li><a href="https://support.apple.com/en-us/HT205234">Mode faible consommation sur votre iPhone</a></li>
    <li><a href="https://developer.apple.com/library/archive/documentation/Performance/Conceptual/EnergyGuide-iOS/LowPowerMode.html">Réagir au mode faible consommation sur les iPhones</a></li>
  </ul>
  
  <h3>Vidéos partagées</h3>
  <p>Les vidéos partagées peuvent être téléchargées pour une visualisation hors ligne uniquement si la vidéo originale peut l'être. La propriété est héritée de la vidéo d'origine et ne peut pas être modifiée uniquement pour la vidéo partagée.</p>
  
  <h3>Audio seulement</h3>
  <p>Les SDK natifs prennent en charge le contenu audio uniquement avec la lecture hors ligne. Vous contrôlez ce que les téléspectateurs voient, qu'il s'agisse d'une affiche ou d'un écran personnalisé.</p>
  <p>
    Le SDK natif pour Android nécessite un <code translate="No">VideoView</code> , et le SDK natif pour iOS nécessite un <code translate="No">UIView</code>. Pour cette raison, l'audio de fond n'est pas pris en charge. Cela signifie que l'audio ne continuera pas à jouer lorsqu'un utilisateur envoie l'application en arrière-plan.
  </p>
  
  <h3>Android: Suppression de l'application</h3>
  <p>Lorsque l'application est supprimée, tout le contenu téléchargé est supprimé. Cela est vrai tant que l'emplacement de stockage par défaut n'est pas remplacé.</p>
  
  <h3>iOS : AirPlay</h3>
  <p>Par mesure de sécurité, vous ne pouvez pas diffuser une vidéo HLS hors ligne sur un appareil AirPlay pour la lecture. Ceci est confirmé par Apple comme étant un <code translate="No">AVFoundation</code> limitation.</p>
  </section>
</article>