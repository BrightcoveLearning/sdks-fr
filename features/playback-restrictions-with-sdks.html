---
title: Description de « Restrictions de lecture avec les SDK natifs » : « Dans cette rubrique, vous apprendrez à utiliser les restrictions de lecture avec les kits SDK natifs Brightcove. »
parent: Features 
grandparent: Home
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>
  
  <!-- <br/>
  <aside class="bcls-aside bcls-aside--tip">This feature is available for a specific set of customers with access to the Limited Availability phase of Brightcove Playback Restrictions.</aside> -->

  <section class="bcls-section">
    <h2 id="Introduction">introduction</h2>
    <p>
      Par défaut, les SDK natifs communiquent avec l'API de lecture Brightcove pour récupérer le contenu de votre vidéo et de votre liste de lecture. Un nouveau système de gestion des droits et des restrictions de lecture se trouve devant l'API de lecture et fournit une autorisation de lecture à l'aide de licences DRM.
    </p>
    <p>Vous pouvez utiliser les droits de lecture avec ou sans DRM, mais si vous choisissez d'utiliser des restrictions d'exécution, vous devrez utiliser un jeton Web JSON (JWT).</p>
    <p>License Keys Protection offre un niveau de sécurité supplémentaire lors de l'utilisation de Dynamic Delivery avec un contenu protégé par DRM ou HTTP Live Streaming Encryption (HLSe). Les demandes de licence peuvent être authentifiées à l'aide d'un <a href="https://general.support.brightcove.com/developer/create-json-web-token.html">Jeton Web JSON (JWT)</a>. </p>

    <p>Le jeton est utilisé lors de la demande de licence vidéo, une fois la vidéo chargée dans le lecteur et la source sélectionnée.</p>

    <aside class="bcls-aside bcls-aside--information">Avec le contenu HLSe, lorsque le lecteur change de rendu, en raison d'une connectivité améliorée ou après le chargement du premier segment, une nouvelle demande de licence est effectuée.</aside>

    <p>Si vous n'êtes pas familier avec cette fonction, consultez le <a href="https://apis.support.brightcove.com/playback-restrictions/getting-started/overview-playback-restrictions.html">Aperçu: Restrictions de lecture Brightcove</a> document.</p>
  </section>

  <section class="bcls-section">
    <h2 id="Requirements">Conditions</h2>
    <p>Voici les conditions requises pour utiliser les restrictions de lecture.</p>
    <!-- <h3>Playback Rights</h3> -->
    <h4>Android</h4>
    <ul>
      <li>Vous devez utiliser Brightcove Native SDK pour la version Android <strong>6.11.0</strong> ou plus tard</li>
    </ul>
    <h4>iOS</h4>
    <ul><li>Vous devez utiliser Brightcove Native SDK pour la version iOS <strong>6.7.0</strong> ou plus tard</li>
    </ul>

    <!-- <h3>License Keys Protection</h3>
    <p>To use License Keys Protection, you need the following:</p>
    <ul>
      <li>Player version <strong>6.33.0</strong> or later</li>
      <li>If using DRM, you will need the <a href="https://support.brightcove.com/configuring-brightcove-player-drm#Changelog">DRM plugin</a> version <strong>5.5.0</strong> or later</li>
    </ul> -->

  </section>

  <section class="bcls-section">
    <h2 id="Android_Using_Playback_Rights">Android: Utilisation des droits de lecture</h2>
    <aside class="bcls-aside bcls-aside--information">Remarques:
      <ul>
        <li>Avec cette implémentation, toute restriction de contenu configurée avec des clés de stratégie sera ignorée</li>
        <li>Sur la plate-forme Android, seul DRM DASH est actuellement pris en charge</li>
      </ul>
    </aside>
    <p>
      Pour effectuer des demandes d'API de lecture qui vérifient les droits et les restrictions de lecture, procédez comme suit :
    </p>
    <ol class="bcls-tasklist-restart">
      <li>
        <p>
          Commencez par le <a href="https://github.com/BrightcoveOS/android-player-samples/tree/master/brightcove-exoplayer/BasicSampleApp/src/main">Exemple d'application de base</a>.
        </p>
      </li>
      <li>
        <p>
          Par défaut, le SDK natif pour Android envoie une requête à l'API de lecture s'il dispose d'une clé de stratégie. Pour utiliser les droits de lecture, n'envoyez pas la clé de stratégie avec votre demande.
        </p>
        <p>
          Créer une instance de <code translate="No">com.brightcove.player.edge.Catalog</code> sans fournir de clé de stratégie. Voici un exemple:
        </p>
        <pre>
<code class="language-java" translate="No">Catalog catalog = new Catalog.Builder(eventEmitter, accountId).build();</code></pre>
        <br />
        <p>
          Si vous suivez l'exemple d'application Brightcove, il obtient l'ID de compte comme indiqué ici :
        </p>
        <pre>
<code class="language-java" translate="No">getString(R.string.account)</code></pre>
        &lt;/br /&gt;
      </li>
      <li>
        <p>
          <strong>Optionnel</strong>: Si vous souhaitez utiliser des restrictions d'exécution, vous devez créer un jeton JWT et le transmettre avec la demande de catalogue.
        </p>
        <p>
          Pour créer votre jeton JWT, suivez les étapes de la <a href="https://apis.support.brightcove.com/playback-restrictions/getting-started/overview-playback-restrictions.html#Runtime_restrictions">Restrictions d'exécution</a> section de l'aperçu : Document sur les restrictions de lecture Brightcove.
        </p>
        <p>
          Pour passer votre jeton avec la demande de catalogue, consultez le <a href="#Using_License_Keys_Protection_Android">Utilisation de la protection des clés de licence : Android section.</a>
        </p>
      </li>
    </ol>
  </section>

  <section class="bcls-section">
    <h2 id="Android_Using_License_Keys_Protection">Android: Utilisation de la protection des clés de licence</h2>

    <p>Le SDK natif pour Android prend actuellement en charge la protection par clé/licence pour les sources HLSe et Widevine DASH. Vous fournirez votre jeton d'autorisation dans le cadre de la demande de catalogue Brightcove pour une seule vidéo ou une liste de lecture.</p>

    <p>
      Pour faire une demande de catalogue Brightcove, procédez comme suit :
    </p>
    <ol class="bcls-tasklist-restart">
      <li>
        <p>
          Créé un <code translate="No">HttpRequestConfig</code> objet et définissez le jeton d'autorisation Brightcove comme indiqué ici :
        </p>
        <pre class="line-numbers"><code class="language-java" translate="No">HttpRequestConfig httpRequestConfig = new HttpRequestConfig.Builder()
  .setBrightcoveAuthorizationToken("<span class="bcls-input">your jwt token</span>")
  .build();
</code></pre>
        <p>
          La valeur du jeton d'autorisation sera la valeur de votre jeton Web JSON.
        </p>
      </li>
      <li>
        <p>
          Une fois que vous avez créé le <code translate="No">HttpRequestConfig</code> l'objet, transmettez-le à l'une des méthodes Catalog suivantes :
        </p>
        <p>
          Pour une demande de vidéo, utilisez l'un des éléments suivants :
        </p>
        <pre class="line-numbers"><code class="language-java" translate="No">findVideoByID(String, HttpRequestConfig, VideoListener)
</code></pre>
        <pre class="line-numbers"><code class="language-java" translate="No">findVideoByReferenceID(String, HttpRequestConfig, VideoListener)
</code></pre>
        <p>
          Pour une demande de playlist, utilisez l'un des éléments suivants :
        </p>
        <pre class="line-numbers"><code class="language-java" translate="No">findPlaylistByID(String, HttpRequestConfig, PlaylistListener)
</code></pre>
        <pre class="line-numbers"><code class="language-java" translate="No">findPlaylistByReferenceID(String, HttpRequestConfig, PlaylistListener)
</code></pre>
        <p>
          Les détails de l'utilisation des jetons pour l'acquisition de licences HLSe et Widevine sont gérés par le SDK.
        </p>
        <aside class="bcls-aside bcls-aside--information">Pour les demandes de playlist, toutes les vidéos de la playlist doivent utiliser le même jeton. Dans une future version, vous pourrez attribuer un jeton différent à chaque vidéo de la playlist. Vous serez responsable du maintien du mappage entre l'ID vidéo et le jeton. Les <code translate="No">conid</code> tel que défini dans le <a href="https://general.support.brightcove.com/developer/create-json-web-token.html#Create_a_JSON_Web_Token">Revendications de jetons JWT</a> est la valeur d'ID vidéo associée à un jeton.</aside>
      </li>
    </ol>

    <h3>Exemple de code</h3>
    <p>
      Voici un exemple qui montre comment transmettre votre jeton d'autorisation lors d'une demande de catalogue :
    </p>
    <pre class="line-numbers"><code class="language-java" translate="No">String myToken = &quot;...&quot;;
HttpRequestConfig httpRequestConfig = new HttpRequestConfig.Builder()
  .setBrightcoveAuthorizationToken(myToken)
  .build();
&hellip;

Catalog catalog = new Catalog(eventEmitter, accountId, policyKey, playbackApiBaseUrl);
catalog.findVideoByReferenceID(videoReferenceId, httpRequestConfig, new VideoListener(){...});
</code></pre>

    <h3>Lecture hors ligne</h3>
    <p>
      Le catalogue hors ligne <code translate="No">findVideo</code> , <code translate="No">requestPurchaseLicense</code> et <code translate="No">requestRentalLicense</code> les méthodes prennent toutes un <code translate="No">HttpRequestConfig</code> comme argument.
    </p>
    <aside class="bcls-aside bcls-aside--tip">La protection par clé/licence avec lecture hors ligne est prise en charge avec le SDK natif pour Android v6.8.1 ou version ultérieure.</aside>
    <p>Voici un exemple :</p>
    <pre class="line-numbers"><code class="language-java" translate="No">private HttpRequestConfig httpRequestConfig;
private String pasToken = &quot;<span class="bcls-input">your jwt token</span>&quot;;
...
HttpRequestConfig.Builder httpRequestConfigBuilder = new HttpRequestConfig.Builder();
httpRequestConfigBuilder.setBrightcoveAuthorizationToken(pasToken);
httpRequestConfig = httpRequestConfigBuilder.build();
playlist.findPlaylist(catalog, httpRequestConfig, new PlaylistListener() {
    @Override
    public void onPlaylist(Playlist playlist) {
        videoListAdapter.setVideoList(playlist.getVideos());
        onVideoListUpdated(false);
        brightcoveVideoView.addAll(playlist.getVideos());
    }

    @Override
    public void onError(String error) {
        String message = showToast(&quot;Failed to find playlist[%s]: %s&quot;, playlist.displayName, error);
        Log.w(TAG, message);
        onVideoListUpdated(true);
    }
});</code></pre>

    <p>
      Pour plus de détails, consultez le <a href="https://github.com/BrightcoveOS/android-player-samples/blob/master/brightcove-exoplayer/OfflinePlaybackSampleApp/src/main/java/com/brightcove/player/samples/offlineplayback/MainActivity.java">Exemple d'application de lecture hors ligne</a>.
    </p>

    <h3>Réponses</h3>
    <p>
      Les réponses suivantes sont associées au PAS :
    </p>
    <ul>
      <li>
        200 - La licence est autorisée à continuer
      </li>
      <li>
        401 - La délivrance de la licence ne doit pas être autorisée à se poursuivre
      </li>
    </ul>

    <!-- <h3>Limitations</h3>
    <p>
      There is a limitation with the current release:
    </p>
    <ul>
      <li>
        Chromecast is not supported with key/license protection.
      </li>
    </ul> -->
  </section>

  <section class="bcls-section">
    <h2 id="iOS_Using_Playback_Rights">iOS : Utilisation des droits de lecture</h2>
    <aside class="bcls-aside bcls-aside--information">Remarques:
      <ul>
        <li>Avec cette implémentation, toute restriction de contenu configurée avec des clés de stratégie sera ignorée</li>
      </ul>
    </aside>

    <p>
      Pour effectuer des demandes d'API de lecture qui vérifient les droits et les restrictions de lecture, procédez comme suit :
    </p>
    <ol class="bcls-tasklist-restart">
      <li>
        <p>
          Commencez par le <a href="https://github.com/BrightcoveOS/ios-player-samples/tree/master/Player/VideoCloudBasicPlayer">Exemple d'application de base</a>.
        </p>
      </li>
      <li>
        <p>
          Par défaut, le SDK natif pour iOS envoie une requête à l'API de lecture s'il dispose d'une clé de stratégie. Pour utiliser les droits de lecture, n'envoyez pas la clé de stratégie avec votre demande.
        </p>
        <p>
          Créer une instance de <code translate="No">BCOVPlaybackService</code> , en définissant la clé de stratégie sur <code translate="No">nil</code>. Voici un exemple:
        </p>
        <pre>
<code class="language-java" translate="No">let playbackService = BCOVPlaybackService(accountId: kViewControllerAccountID, policyKey: nil)</code></pre>
      </li>
      <li>
        <p>
          <strong>Optionnel</strong>: Si vous souhaitez utiliser des restrictions d'exécution, vous devez créer un jeton JWT et le transmettre avec la demande de catalogue.
        </p>
        <p>
          Pour créer votre jeton JWT, suivez les étapes de la <a href="https://apis.support.brightcove.com/playback-restrictions/getting-started/overview-playback-restrictions.html#Runtime_restrictions">Restrictions d'exécution</a> section de l'aperçu : Document sur les restrictions de lecture Brightcove.
        </p>
        <p>
          Pour passer votre jeton avec la demande de catalogue, consultez le <a href="#Using_License_Keys_Protection_iOS">Utilisation de la protection des clés de licence : iOS</a> section.
        </p>
      </li>
    </ol>
  </section> 

  <section class="bcls-section">
    <h2 id="iOS_Using_License_Keys_Protection">iOS : Utilisation de la protection des clés de licence</h2>

    <p>Lorsque vous utilisez la protection par clé/licence, vous devrez utiliser les méthodes de service de lecture qui vous permettent de transmettre votre jeton d'autorisation. Cela se fait à l'aide du <code translate="No">authToken</code> paramètre.</p>

    <p>
      Pour une demande de vidéo, utilisez l'un des éléments suivants :
    </p>
    <pre class="line-numbers"><code class="language-objectivec" translate="No">- (void)findVideoWithVideoID:(NSString *)videoID authToken:(NSString *)authToken parameters:(NSDictionary *)parameters completion:(void (^)(BCOVVideo *video, NSDictionary *jsonResponse, NSError *error))completionHandler;
</code></pre>
    <pre class="line-numbers"><code class="language-objectivec" translate="No">- (void)findVideoWithReferenceID:(NSString *)referenceID authToken:(NSString *)authToken parameters:(NSDictionary *)parameters completion:(void (^)(BCOVVideo *video, NSDictionary *jsonResponse, NSError *error))completionHandler;
</code></pre>

    <p>
      Pour une demande de playlist, utilisez l'un des éléments suivants :
    </p>
    <pre class="line-numbers"><code class="language-objectivec" translate="No">- (void)findPlaylistWithPlaylistID:(NSString *)playlistID authToken:(NSString *)authToken parameters:(NSDictionary *)parameters completion:(void (^)(BCOVPlaylist *playlist, NSDictionary *jsonResponse, NSError *error))completionHandler;
</code></pre>
    <pre class="line-numbers"><code class="language-objectivec" translate="No">- (void)findPlaylistWithReferenceID:(NSString *)referenceID authToken:(NSString *)authToken parameters:(NSDictionary *)parameters completion:(void (^)(BCOVPlaylist *playlist, NSDictionary *jsonResponse, NSError *error))completionHandler;
</code></pre>

    <p>
      Les détails de l'utilisation des jetons pour l'acquisition de licences HLSe et FairPlay sont gérés par le SDK.
    </p>
    <aside class="bcls-aside bcls-aside--information">Pour les demandes de playlist, toutes les vidéos de la playlist doivent utiliser le même jeton. Dans une future version, vous pourrez attribuer un jeton différent à chaque vidéo de la playlist. Vous serez responsable du maintien du mappage entre l'ID vidéo et le jeton. Les <code translate="No">conid</code> tel que défini dans le <a href="https://general.support.brightcove.com/developer/create-json-web-token.html#Create_a_JSON_Web_Token">Revendications de jetons JWT</a> est la valeur d'ID vidéo associée à un jeton.</aside>

    <p>
      Pour plus de détails, consultez le <a href="/ios/reference/sdk/index.html#PlaybackAuthorizationService">Service d'autorisation de lecture</a> section de référence du Kit de développement logiciel natif pour iOS.
    </p>

    <h3>Lecture hors ligne</h3>
    <p>
      Si vous utilisez le service d'autorisation de lecture avec lecture hors ligne, il existe une nouvelle méthode pour renouveler une licence FairPlay qui accepte un jeton d'autorisation :
    </p>
    <pre class="line-numbers"><code class="language-objectivec" translate="No">// Request license renewal
    [BCOVOfflineVideoManager.sharedManager renewFairPlayLicense:offlineVideoToken
        video:video // recent video from Playback API or Playback Service class
        authToken: authToken
        Parameters: parameters
        completion:^(BCOVOfflineVideoToken offlineVideoToken, NSError *error)
    {
        // handle errors
    }];
</code></pre>

    <p>
      Lorsque le renouvellement de la licence est terminé, le bloc d'achèvement sera appelé avec le même jeton vidéo hors ligne qui a été transmis. Un <code translate="No">NSError</code> indiquera tout problème survenu (ou nul s'il n'y a pas d'erreur).
    </p>

    <p>
      Pour plus de détails, consultez le <a href="https://github.com/brightcove/brightcove-player-sdk-ios/blob/master/OfflinePlayback.md#renewing-a-fairplay-license">Renouveler une licence FairPlay</a> section de référence du Kit de développement logiciel natif pour iOS.
    </p>

    <h3>Réponses</h3>
    <p>
      Les réponses suivantes sont associées au PAS :
    </p>
    <ul>
      <li>
        200 - La licence est autorisée à continuer
      </li>
      <li>
        401 - La délivrance de la licence ne doit pas être autorisée à se poursuivre
      </li>
    </ul>

  </section>

  <!-- <section class="bcls-section">
    <h2 id="Related_topics">Related topics</h2>
    <ul>
      <li>
        <a href="/playback-rights/getting-started/overview-epa.html">Overview: Playback Rights Management Service</a>
      </li>
      <li>
        <a href="/playback-rights/getting-started/implementing-epa.html">Implementing Playback Rights Management Service</a>
      </li>
      <li>
        <a href="/playback-rights/guides/using-epa-with-bcp.html">Using Playback Rights with Brightcove Player</a>
      </li>
      <li>
        <a href="/playback-authorization/guides/stream-concurrency.html">Implementing Stream Concurrency</a>
      </li>
    </ul>
  </section> -->

</article>