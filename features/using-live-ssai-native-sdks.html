---
title: 'Utiliser Live SSAI avec les SDK natifs' la
description: Dans cette rubrique, vous apprendrez à lire des flux en direct activés pour l'insertion d'annonces côté serveur (SSAI) à l'aide des kits SDK natifs Brightcove.
parent: Live 
grandparent: Android Development
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>

<section class="bcls-section">
<h2 id="Overview">Aperçu</h2>

<p>Insertion d'annonces côté serveur (<span translate="No">SSAI</span> ) vous permet d'assembler des publicités dans votre flux de contenu vidéo pour offrir une expérience de visionnage semblable à celle d'un téléviseur. Pour lire un flux en direct avec les SDK natifs, vous devez transmettre le jeton de lecture avec votre demande de vidéo.</p>

<p>Habitent <span translate="No">SSAI</span> vous permet de:</p>

<ul>
	<li>Insérez des publicités à l'aide de points de repère envoyés depuis votre encodeur ou créez un point de repère instantané à l'aide du <span translate="No">API en direct</span></li>
	<li>Ingérer des éléments « slate » pour remplir tout temps publicitaire inutilisé</li>
	<li>Évitez les bloqueurs de publicités avec des publicités qui sont cousues dans le flux en direct côté serveur</li>
</ul>
</section>

<section class="bcls-section">
<h2 id="Steps">Pas</h2>

<p>Pour lire un flux en direct avec <span translate="No">SSAI</span> , Suivez ces étapes:</p>

<ol class="bcls-tasklist-restart">
	<li><a href="https://studio.support.brightcove.com/admin/configuring-server-side-ad-settings.html#Creating_a_Live_ad_configuration">Créer une configuration d'annonce en direct</a> en utilisant Video Cloud Studio</li>
	<li>Optionnel: <a href="https://live.support.brightcove.com/live-module/implementing-server-side-ads-live-module.html#fill_slate">Créer des actifs d'ardoise</a> , et/ou <a href="https://live.support.brightcove.com/live-api/ssai/live-api-cue-points-and-ad-beacons-ssai.html">Insérer des points de repère et des balises publicitaires</a></li>
	<li><a href="#Create_a_live_event">Créer un événement en direct</a></li>
	<li><a href="#Get_the_playback_token">Obtenez le jeton de lecture</a></li>
	<li>
	<p>Créez votre application :</p>

	<ul>
		<li><a href="#Android_implementation">Implémentation Android</a></li>
		<li><a href="#iOS_implementation">Implémentation iOS</a></li>
		<!-- <li><a href="#tvOS_implementation">tvOS implementation</a></li> -->
	</ul>
	</li>
	<li><a href="https://live.support.brightcove.com/live-module/implementing-server-side-ads-live-module.html#Requesting_an_ad">Demander une pause publicitaire</a></li>
</ol>

<aside class="bcls-aside bcls-aside--tip">Si vous préférez, vous pouvez utiliser l'API Live pour créer votre flux et configurer vos pauses publicitaires. Pour plus de détails, consultez le <a href="https://live.support.brightcove.com/live-api/ssai/live-api-server-side-ad-insertion-ssai.html">API en direct : Insertion d'annonces côté serveur (SSAI)</a> document.</aside>
</section>

<section class="bcls-section">
<h2 id="Create_a_live_event">Créer un événement en direct</h2>

<p>Par défaut, votre diffusion en direct utilisera un CDN Brightcove. Si vous préférez, vous pouvez utiliser votre propre choix de CDN (BYO CDN ou "apportez votre propre bande passante"). Pour utiliser votre propre CDN, incluez l'étape facultative dans cette section et dans le <a href="#Get_the_playback_token">Obtenez le jeton de lecture</a> section.</p>

<p>Pour créer un événement en direct, procédez comme suit :</p>

<ol class="bcls-tasklist-restart">
	<li>Se référer au <a href="https://live.support.brightcove.com/live-module/implementing-server-side-ads-live-module.html#create_event">Implémentation des publicités côté serveur dans le module en direct</a> document.</li>
  <li>Élargir la <strong>Options avancées</strong> section.</li>
	<li>
    <p>Sélectionner <strong>Activer l'insertion d'annonces côté serveur (SSAI)</strong> , et choisissez un <strong>Remplir l'ardoise</strong>.</p>
    <figure class="bcls-figure"><img class="bcls-image--no-border" alt="Enable SSAI" src="/assets/images/features/live-ssai/enable-ssai.png" />
      <figcaption class="bcls-caption--image">Activer SSAI</figcaption>
      </figure>
  </li>
	<li>
	<p><strong>Optionnel</strong>: Pour utiliser votre propre CDN, incluez ces étapes supplémentaires :</p>
	<ul>
		<li>
		<p>Dans le <strong>Options avancées</strong> rubrique, sélectionnez le <strong>Ajouter une configuration multi CDN</strong> option.</p>

		<figure class="bcls-figure"><img class="bcls-image--no-border" alt="Multi CDN Configuration" src="/assets/images/features/live-ssai/add-cdn.png" />
		<figcaption class="bcls-caption--image">Configuration multi-CDN</figcaption>
		</figure>
		</li>
		<li>
      <p>Saisissez une étiquette et une URL pour votre propre CDN. Pour plus de détails, consultez le <a href="https://studio.support.brightcove.com/general/content-delivery-options.html">Options de diffusion de contenu</a> document.</p>
      <figure class="bcls-figure"><img class="bcls-image--no-border" alt="Add label and URL" src="/assets/images/features/live-ssai/add-label-and-url.png" />
      <figcaption class="bcls-caption--image">Ajouter une étiquette et une URL</figcaption>
      </figure>
    </li>
	</ul>
	</li>
  <li>
    Lorsque vous avez terminé de configurer votre événement en direct, cliquez sur <strong>Créer un évènement</strong>.
  </li>
</ol>
</section>

<section class="bcls-section">
<h2 id="Get_the_playback_token">Obtenez le jeton de lecture</h2>

<p>Lorsque vous activez SSAI avec votre diffusion en direct, le code d'intégration du lecteur contiendra un <code translate="No">adConfigId</code> paramètre. Cette valeur est le jeton de lecture, que vous utiliserez lors de la demande de contenu vidéo dans votre application.</p>

<p>Pour obtenir le jeton de lecture, procédez comme suit :</p>

<ol class="bcls-tasklist-restart">
	<li>Dans Video Cloud Studio, revenez au <strong>Habitent</strong> module.</li>
	<li>Dans la navigation de gauche, sélectionnez <strong>Publier et intégrer</strong>.</li>
	<li>
    <p>Dans le <strong>Options de lecteur en direct</strong> section, développez la <strong>Sélectionnez la configuration de l'annonce</strong> option et sélectionnez votre configuration d'annonce en direct que vous avez créée à l'étape précédente.</p>
    <figure class="bcls-figure"><img class="bcls-image--no-border" alt="Select Ad Configuration" src="/assets/images/features/live-ssai/select-ad-config.png" />
    <figcaption class="bcls-caption--image">Sélectionnez la configuration de l'annonce</figcaption>
    </figure>
	</li>
  <li>
    <p>Copiez le <a href="">Code d'intégration standard</a> dans votre presse-papiers.</p>
    <figure class="bcls-figure"><img class="bcls-image--no-border" alt="Embed code" src="/assets/images/features/live-ssai/embed-code.png" />
    <figcaption class="bcls-caption--image">Code intégré</figcaption>
    </figure>
	</li>
	<li>
	  <p>À partir du code d'intégration, copiez le <code translate="No">VideoId</code> valeur du paramètre. Vous utiliserez cette valeur dans une étape ultérieure. Cela devrait ressembler à ceci :</p>
	<pre>
<code class="language-html" translate="No">1700044540369289748</code></pre>
	</li>
  <li>
	  <p>À partir du code d'intégration, copiez le <code translate="No">adConfigId</code> valeur du paramètre. Vous utiliserez ces valeurs dans une étape ultérieure. Les <code translate="No">adConfigId</code> value est le jeton de lecture transmis lors de la demande de contenu de votre bibliothèque Video Cloud. Cela devrait ressembler à ceci :</p>
	<pre>
<code class="language-html" translate="No">live.t0vbpNIjTPW6IZ29QsyuWrmgjvQjEWe3u_wPmaMqnhAmE05DCF7aAa-6fDIkvryJctH1rADJnfXYANy7tDg4agQFx23WIvsXMmAjz1BiNl-S3rFZ9tRdzRWdo1E4FTLkET6XcNuNZ2acTnzmow</code></pre>
	</li>
	<li>Vous aurez également besoin de l'identifiant de compte et de la clé de stratégie pour votre compte.</li>
</ol>
</section>

<section class="bcls-section">
<h2 id="Android_implementation">Implémentation Android</h2>

<p>Pour lire un flux en direct, vous incluez le <code translate="No">adConfigId</code> paramètre et la valeur de votre jeton de lecture à votre demande de vidéo.</p>

<p>Suivez ces étapes pour créer votre application :</p>

<ol class="bcls-tasklist-restart">
	<li>Utilisez le <a href="https://github.com/BrightcoveOS/android-player-samples/tree/master/brightcove-exoplayer/BasicSsaiSampleApp">Exemple d'application SSAI de base</a> comme point de départ pour votre code.</li>
	<li>Dans le <strong>res/valeurs/chaînes.xml</strong> fichier, remplacez ce qui suit par vos propres valeurs
	<ul>
		<li>Identifiant de compte</li>
    <li>Clé de stratégie</li>
		<li>Identifiant de la vidéo (à partir du <a href="#Get_the_playback_token">Obtenez le jeton de lecture</a> section ci-dessus)</li>
	</ul>
	</li>
	<li>
	<p>Dans le <strong>MainActivity.java</strong> fichier, remplacez le <code translate="No">ad_config_id</code> valeur avec votre jeton de lecture (URL live) que vous avez copié depuis le module Live dans le <a href="#Get_the_playback_token">Obtenez le jeton de lecture</a> rubrique ci-dessus.</p>
	<pre>
<code class="language-java" translate="No">private final String AD_CONFIG_ID_QUERY_PARAM_VALUE = "live.t0vbpNIjTPW6IZ29QsyuWrmgjvQjEWe3u_wPmaMqnhAmE05DCF7aAa-6fDIkvryJctH1rADJnfXYANy7tDg4agQFx23WIvsXMmAjz1BiNl-S3rFZ9tRdzRWdo1E4FTLkET6XcNuNZ2acTnzmow";</code></pre>
	</li>
	<li>
	<p>Les <code translate="No">ad_config_id</code> avec la valeur de votre jeton de lecture est ajoutée à la requête HTTP en tant que paramètre de requête.</p>

	<pre class="line-numbers">
<code class="language-java" translate="No">HttpRequestConfig httpRequestConfig = new HttpRequestConfig.Builder()
  .addQueryParameter(AD_CONFIG_ID_QUERY_PARAM_KEY, AD_CONFIG_ID_QUERY_PARAM_VALUE)
  .build();
</code></pre>
	</li>
	<li>
	<p>Faites l'appel de catalogue à l'API Playback avec votre identifiant de diffusion en direct et la requête HTTP mise à jour.</p>

	<pre class="line-numbers">
<code class="language-java" translate="No">catalog.findVideoByID(getString(R.string.video_id), httpRequestConfig, new VideoListener() {
   @Override
   public void onVideo(Video video) {
       plugin.processVideo(video);
   }
 });
</code></pre>
	</li>
	<li>
	<p>Votre application est prête à lire le flux en direct.</p>

	<p>Pour plus de détails sur l'utilisation des flux en direct activés pour SSAI avec le SDK natif pour Android, consultez le <a href="https://www.brightcove.com/en/blog/2019/12/ssai-plugin-changes-690">Modifications du plug-in SSAI dans 6.9.0</a> article de blog.</p>
	</li>
</ol>
</section>

<section class="bcls-section">
<h2 id="iOS_implementation">Implémentation iOS</h2>

<p>Pour lire un flux en direct, vous incluez le <code translate="No">adConfigId</code> paramètre et la valeur de votre jeton de lecture à votre demande de vidéo.</p>

<p>Suivez ces étapes pour créer votre application :</p>

<ol class="bcls-tasklist-restart">
	<li>Utilisez le <a href="https://github.com/BrightcoveOS/ios-player-samples/tree/master/SSAI/BasicSSAIPlayer">Exemple d'application SSAI de base</a> comme point de départ pour votre code.</li>
	<li>Dans le <strong>ViewController.swift</strong> fichier, remplacez ce qui suit par vos propres valeurs
	<ul>
		<li>Identifiant de compte</li>
    <li>Clé de stratégie</li>
		<li>Identifiant de la vidéo (à partir du <a href="#Get_the_playback_token">Obtenez le jeton de lecture</a> section ci-dessus)</li>
	</ul>
	</li>
	<li>
	<p>Dans le <strong>ViewController.swift</strong> fichier, remplacez le <code translate="No">AdConfigId</code> valeur avec votre jeton de lecture (URL live) que vous avez copié depuis le module Live dans le <a href="#Get_the_playback_token">Obtenez le jeton de lecture</a> rubrique ci-dessus.</p>

	<pre>
<code class="language-swift" translate="No">static let AdConfigId = "live.t0vbpNIjTPW6IZ29QsyuWrmgjvQjEWe3u_wPmaMqnhAmE05DCF7aAa-6fDIkvryJctH1rADJnfXYANy7tDg4agQFx23WIvsXMmAjz1BiNl-S3rFZ9tRdzRWdo1E4FTLkET6XcNuNZ2acTnzmow";</code></pre>
	</li>
	<li>
	<p>Les <code translate="No">AdConfigId</code> avec la valeur de votre jeton de lecture est ajoutée à la requête HTTP en tant que paramètre de requête.</p>

	<pre class="line-numbers">
<code class="language-swift" translate="No">let queryParameters = [kBCOVPlaybackServiceParamaterKeyAdConfigId: Constants.AdConfigId]
</code></pre>
	</li>
	<li>
	<p>Faites l'appel de catalogue à l'API Playback avec votre identifiant de diffusion en direct et la requête HTTP mise à jour.</p>

	<pre class="line-numbers">
<code class="language-swift" translate="No">playbackService.findVideo(withVideoID: Constants.VideoId, parameters: queryParameters) { [weak self] (video: BCOVVideo?, jsonResponse: [AnyHashable: Any]?, error: Error?) -&gt; Void in

   guard let _video = video else {
     print("ViewController Debug - Error retrieving video: \(error?.localizedDescription ?? "unknown error")")
     return
   }

   self?.playbackController?.setVideos([_video] as NSFastEnumeration)
}
</code></pre>
	</li>
	<li>Votre application est prête à lire le flux en direct.</li>
</ol>
</section>
</article>