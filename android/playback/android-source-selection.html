Android:---
title: ' Sélection de la source' la
description: Dans cette rubrique, vous apprendrez comment le Brightcove Native Player SDK pour Android utilise un processus de sélection de source par défaut lors de la lecture d'une vidéo.
parent: Playback 
grandparent: Android Development
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>

<section class="bcls-section">
<h2 id="Introduction">introduction</h2>

<p>Lorsque vous récupérez des vidéos du catalogue Brightcove, le SDK doit décider quelle source lire. Ceci est mis en œuvre dans le <a href="/android/reference/javadoc/com/brightcove/player/controller/DefaultSourceSelectionController.html">DefaultSourceSelectionController</a> et <a href="/android/reference/javadoc/com/brightcove/player/controller/ExoPlayerSourceSelectionController.html">ExoPlayerSourceSelectionController</a> Composants.</p>
</section>

<section class="bcls-section">
<h2 id="Default_selection_process">Processus de sélection par défaut</h2>

<p>Le Brightcove Player SDK pour Android utilise un processus de sélection de source par défaut. Pour simplifier, nous allons nous concentrer sur la prise en charge par le SDK de l'API Brightcove Playback et de l'ExoPlayer de Google.</p>

<p>Le processus de sélection par défaut est défini comme suit :</p>

<ol class="bcls-tasklist">
	<li>
	<p>Avec le Brightcove Native SDK pour Android 6.4+, la livraison HTTPS pour tous les types de sources est sélectionnée si disponible.</p>

	<p>Les deux <a href="/android/reference/javadoc/com/brightcove/player/controller/DefaultSourceSelectionController.html">DefaultSourceSelectionController</a> et <a href="/android/reference/javadoc/com/brightcove/player/controller/ExoPlayerSourceSelectionController.html">ExoPlayerSourceSelectionController</a> essayez de sélectionner la version HTTPS du <code translate="No">deliveryType</code> choisi. Si aucune source HTTPS n'existe, le contrôleur de sélection sélectionnera la première disponible.</p>

	<aside class="bcls-aside bcls-aside--information">Si votre vidéo contient à la fois des sources HTTP et HTTPS pour les sous-titres/sous-titres WebVTT, le SDK natif pour Android peut ne pas renvoyer la version HTTPS. Brightcove est conscient de cette situation et disposera d'un correctif dans une prochaine version.</aside>
	</li>
	<li>Les <a href="/android/reference/javadoc/com/brightcove/player/view/BrightcoveExoPlayerVideoView.html">BrightcoveExoPlayerVidéoVoir</a> recherche la première source qui a un <code translate="No">deliveryType</code> de <strong>MPEG-DASH</strong> , et un profil qui n'est ni <strong>urne : hbbtv</strong> ni <strong>urne:dvb</strong>. Le SDK ne prend en charge la lecture avec aucun de ces profils DASH, et ils seront donc filtrés des sources.</li>
	<li>Si ce qui précède n'est pas trouvé, la sélection de la source revient à la première source avec un <code translate="No">deliveryType</code> de <strong>HLS</strong>.</li>
	<li>Si aucune source de ce type n'est trouvée, il revient à la source avec un <code translate="No">deliveryType</code> de <strong>MP4</strong> et un débit le plus proche de 256 kBps.</li>
</ol>

<p>Une fois la source trouvée, l'implémentation se poursuit comme suit :</p>

<ol class="bcls-tasklist">
	<li>Si elle est trouvée, la source sélectionnée sera émise avec une réponse à la <strong>SÉLECTIONNER LA SOURCE</strong> un événement.</li>
	<li>Par défaut, le <a href="/android/reference/javadoc/com/brightcove/player/controller/VideoPlaybackController.html">Contrôleur de lecture vidéo</a> gère le <strong>SÉLECTIONNER LA SOURCE</strong> réponse, en émettant un <strong>SET_SOURCE</strong> un événement.</li>
	<li>Les <a href="/android/reference/javadoc/com/brightcove/player/display/VideoDisplayComponent.html">Composant d'affichage vidéo</a> ou une sous-classe gère le <strong>SET_SOURCE</strong> événement en chargeant l'URL dans le lecteur sous-jacent (ExoPlayer ou MediaPlayer).</li>
	<li>Lorsque la lecture commence, le lecteur sous-jacent est responsable de l'adaptation du débit avec le contenu HLS et DASH. Avec HLS, le lecteur sous-jacent démarre avec le premier débit indiqué dans le manifeste principal.</li>
</ol>

<p>Lorsque vous utilisez les paramètres de transcodage par défaut, la première source HLS doit être la liste de lecture principale m3u8 qui pointe vers toutes vos sources individuelles (rendus).</p>
</section>

<section class="bcls-section">
<h2 id="Setting_HLS_sources">Réglage des sources HLS</h2>

<p>Il est possible de personnaliser la sélection de source au niveau de l'application, pour filtrer tous les types de diffusion indésirables avant que la politique de sélection de source par défaut du SDK ne soit invoquée. Pour ce faire, vous devez modifier les collections source définies dans l'objet Video à partir de la réponse JSON de l'API Playback.</p>

<p>Cet exemple utilise uniquement des sources HLS :</p>

<pre class="line-numbers">
<code class="language-java" translate="No">catalog.findVideoByReferenceID(videoReferenceId, new com.brightcove.player.edge.VideoListener() {
	@Override
	public void onVideo(Video video) {
	 sourceSelectionFilter(DeliveryType.HLS, video);
	 brightcoveVideoView.add(video);
	 brightcoveVideoView.start();
	}
});</code></pre>

<p>Et le <code translate="No">sourceSelectionFilter()</code> méthode ressemblerait à ceci:</p>

<pre class="line-numbers">
<code class="language-java" translate="No">public static void sourceSelectionFilter(@NonNull DeliveryType deliveryTypeFilter, @NonNull Video video) {
 if (video.getSourceCollections().containsKey(deliveryTypeFilter)) {
   // Only remove the other delivery types if the desired type is in our Source collections
   for (DeliveryType deliveryType : DeliveryType.values()) {
     if (!deliveryType.equals(deliveryTypeFilter)) {
            video.getSourceCollections().remove(deliveryType);
     }
   }
 }
}</code></pre>
</section>
</article>