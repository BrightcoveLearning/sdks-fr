---
title: 'Plusieurs pistes audio pour la lecture hors ligne avec le SDK natif pour Android' la
description: Dans cette rubrique, vous apprendrez à renvoyer plusieurs pistes audio et texte lorsque vous travaillez avec la lecture hors ligne avec le Brightcove Native Player SDK pour Android.
parent: Playback 
grandparent: Android Development
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>

<section class="bcls-section">
<h2 id="Manage_multiple_tracks">Gérer plusieurs pistes</h2>

<p>Par défaut, aucun fichier de sous-titres et une seule piste audio sont téléchargés. Pour télécharger des éléments supplémentaires associés à la vidéo, procédez comme suit :</p>

<ol class="bcls-tasklist">
	<li>
	<p>Obtenez une référence au Video Cloud <a href="/android/reference/javadoc/com/brightcove/player/edge/OfflineCatalog.html">Catalogue hors ligne</a> client.</p>

	<pre>
<code class="language-java" translate="No">private OfflineCatalog catalog;
...
catalog = new OfflineCatalog(this, eventEmitter, ACCOUNT_ID, POLICY_KEY);
...</code></pre>
	</li>
	<li>
	<p>Appeler le <a href="/android/reference/javadoc/com/brightcove/player/edge/AbstractOfflineCatalog.html#getMediaFormatTracksAvailable-com.brightcove.player.model.Video-com.brightcove.player.offline.MediaDownloadable.MediaFormatListener-">getMediaFormatTracksDisponible</a> méthode, en passant par le <a href="/android/reference/javadoc/com/brightcove/player/model/Video.html">Vidéo</a> l'objet pour lequel vous souhaitez obtenir des informations, et le <a href="/android/reference/javadoc/com/brightcove/player/offline/MediaDownloadable.MediaFormatListener.html">MediaFormatListener</a> pour écouter les données renvoyées.</p>

	<pre>
<code class="language-java" translate="No">OfflineCatalog.getMediaFormatTracksAvailable(
  @NonNull final Video video,
  @NonNull final MediaDownloadable.MediaFormatListener mediaFormatListener)</code></pre>
	</li>
	<li>
	<p>Les <code translate="No">MediaFormatListener</code> appelle la méthode suivante :</p>

	<pre>
<code class="language-java" translate="No">void onResult(MediaDownloadable mediaDownloadable, Bundle mediaFormatBundle);</code></pre>

	<p>Les <a href="/android/reference/javadoc/com/brightcove/player/offline/MediaDownloadable.html">MédiaTéléchargeable</a> L'objet contient des informations, notamment des rendus vidéo, des langues audio et des sous-titres. Les <code translate="No">mediaDownloadable</code> l'objet est mis en cache et utilisé lorsque vous appelez <a href="/android/reference/javadoc/com/brightcove/player/edge/AbstractOfflineCatalog.html#downloadVideo-com.brightcove.player.model.Video-">OfflineCatalog.downloadVideo (Vidéo)</a>.</p>

	<p>Les <a href="/android/reference/javadoc/com/brightcove/player/offline/MediaDownloadable.MediaFormatListener.html">Empaqueter</a> L'objet contient des informations sur les pistes de format multimédia disponibles et possède les propriétés suivantes :</p>

	<ul>
		<li><a href="/android/reference/javadoc/com/brightcove/player/offline/MediaDownloadable.html#VIDEO_RENDITIONS">Médias téléchargeables.VIDEO_RENDITIONS</a> - Contient une liste de tableaux de <code translate="No">MediaFormat</code> objets</li>
		<li><a href="/android/reference/javadoc/com/brightcove/player/offline/MediaDownloadable.html#AUDIO_LANGUAGES">MédiaTéléchargeable.AUDIO_LANGUAGES</a> - Contient une liste de tableaux de <code translate="No">MediaFormat</code> objets.</li>
		<li><a href="/android/reference/javadoc/com/brightcove/player/offline/MediaDownloadable.html#AUDIO_LANGUAGE_ROLES">MediaDownloadable.AUDIO_LANGUAGE_ROLES</a> - Contient une liste de tableaux de chaînes. Cette liste fournit des informations supplémentaires sur les <code translate="No">MediaDownloadable.AUDIO_LANGUAGES</code>. Les index correspondent à la liste des langues audio. L'exemple de rôles audio peut être principal et alternatif.</li>
		<li><a href="/android/reference/javadoc/com/brightcove/player/offline/MediaDownloadable.html#CAPTIONS">MédiaTéléchargeable.LÉGENDES</a> - Contient une liste de tableaux de <code translate="No">MediaFormat</code> objets</li>
	</ul>
	</li>
	<li>
	<p>Récupérez les listes de données du bundle. Voici des exemples de récupération des différentes listes :</p>

	<pre>
<code class="language-java" translate="No">ArrayList&lt;MediaFormat&gt; video = bundle.getParcelableArrayList(MediaDownloadable.VIDEO_RENDITIONS);

ArrayList&lt;MediaFormat&gt; audio = bundle.getParcelableArrayList(MediaDownloadable.AUDIO_LANGUAGES);

ArrayList&lt;String&gt; roles = bundle.getStringArrayList(MediaDownloadable.AUDIO_LANGUAGE_ROLES);

ArrayList&lt;MediaFormat&gt; captions = bundle.getParcelableArrayList(MediaDownloadable.CAPTIONS);</code></pre>
	</li>
	<li>
	<p>Créer un nouveau <code translate="No">Bundle</code> (<code translate="No">filteredBundle</code> ) pour sélectionner les pistes audio et les sous-titres que vous souhaitez inclure dans le téléchargement.</p>

	<pre>
<code class="language-java" translate="No">Bundle filteredBundle = new Bundle();</code></pre>

	<aside class="bcls-aside bcls-aside--information">Si vous réutilisez l'ensemble créé précédemment, vous pouvez télécharger toutes les pistes audio et les sous-titres codés.</aside>
	</li>
	<li>
	<p>Filtrez les pistes que vous voulez dans la liste que vous avez créée précédemment et ajoutez-la à la nouvelle <code translate="No">filteredBundle</code>.</p>

	<pre>
<code class="language-java" translate="No">ArrayList&lt;MediaFormat&gt; captions = bundle.getParcelableArrayList(MediaDownloadable.CAPTIONS);
if (captions != null &amp;&amp; captions.size() &gt; 0) {
   ArrayList&lt;MediaFormat&gt; newCaptions = new ArrayList&lt;&gt;();
   newCaptions.add(captions.get(0));

filteredBundle.putParcelableArrayList(MediaDownloadable.CAPTIONS, newCaptions);
}</code></pre>
	</li>
	<li>
	<p>Met le <code translate="No">filteredBundle</code> à la <code translate="No">MediaDownloadable</code> objet.</p>

	<pre>
<code class="language-java" translate="No">mediaDownloadable.setConfigurationBundle(filteredBundle);</code></pre>
	</li>
	<li>
	<p>Téléchargez la vidéo.</p>

	<pre>
<code class="language-java" translate="No">offlineCatalog.downloadVideo(video);</code></pre>

	<p>En interne, le <code translate="No">OfflineCatalog</code> utilisera le cache <code translate="No">MediaDownloadable</code> fourni par le <code translate="No">MediaDownloadable.MediaFormatListener</code> rappeler.</p>
	</li>
</ol>
</section>

<section class="bcls-section">
<h2 id="Code_sample">Exemple de code</h2>

<p>Pour un exemple complet de téléchargement de pistes audio et de fichiers de sous-titres supplémentaires, consultez le <a href="https://github.com/BrightcoveOS/android-player-samples/tree/master/brightcove-exoplayer/OfflinePlaybackSampleApp/src/main/java/com/brightcove/player/samples/offlineplayback">Exemple d'application de lecture hors ligne</a>.</p>
</section>
</article>