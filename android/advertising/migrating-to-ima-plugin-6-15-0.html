---
title: Description de la migration vers le plug-in IMA 6.15.0 de Brightcove : Dans cette rubrique, vous apprendrez comment migrer votre application pour utiliser le plug-in IMA de Brightcove pour le SDK natif pour Android 6.15.0.
parent: Advertising 
grandparent: Android Development
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>


<section class="bcls-section">
<h2 id="Overview">Aperçu</h2>
<p>Le Brightcove Native SDK pour Android 6.15.0 ou version ultérieure prend en charge le Google IMA SDK version 3.19.4. Si vous utilisez la publicité IMA, il y a quelques points à connaître pour utiliser cette version du plugin IMA. Ils comprennent les éléments suivants :</p>
<ul>
  <li>
    <a href="#Changes_in_the_Google_IMA_SDK">Modifications apportées au SDK IMA de Google</a>
  </li>
  <li>
     <a href="#Changes_in_the_Brightcove_IMA_plugin">Changements dans le plugin Brightcove IMA</a>
  </li>
  <li>
     <a href="#Migrating_to_the_IMA_Plugin_6_15_0">Migration vers le plug-in IMA 6.15.0&lt;/a
    </li>
</ul>
</section>

<section class="bcls-section">
<h2 id="Changes_in_the_Google_IMA_SDK">Modifications apportées au SDK IMA de Google</h2>
<p>
  Le Brightcove Native SDK a mis à jour le Google IMA SDK de la version 3.11.2 à la version 3.19.4. Les changements les plus pertinents incluent :
</p>
<ul>
  <li>
    <code translate="No">SdkFactory.createAdDisplayContainer()</code> est obsolète
  </li>
  <li>
    <code translate="No">AdDisplayContainer.setPlayer(VideoAdPlayer)</code> est obsolète
  </li>
  <li>
    <code translate="No">AdDisplayContainer.setAdContainer(ViewGroup)</code> est obsolète
  </li>
  <li>
    <code translate="No">AdsRequest.setAdDisplayContainer(AdDisplayContainer)</code> est retiré
  </li>
</ul>
<p>Pour la version complète, voir le <a href="https://developers.google.com/interactive-media-ads/docs/sdks/android/client-side/history">Historique des versions du SDK Google IMA Android</a> document.</p>
</section>

<section class="bcls-section">
<h2 id="Changes_in_the_Brightcove_IMA_plugin">Changements dans le plugin Brightcove IMA</h2>
<p>
  Le plugin Brightcove IMA a apporté plusieurs modifications pour être entièrement compatible avec la nouvelle version du SDK Google IMA. Ils comprennent:
</p>
<ul>
  <li>
    <a href="#Using_the_GoogleIMAComponent_Builder">Utilisation de GoogleIMAComponent Builder</a>
  </li>
  <li>
     <a href="#Creating_the_AdDisplayContainer">Création de l'AdDisplayContainer</a>
  </li>
  <li>
     <a href="#Deprecated_methods_in_GoogleIMAVideoAdPlayer">Méthodes obsolètes dans GoogleIMAVideoAdPlayer</a>
  </li>
</ul>

<h3 id="Using_the_GoogleIMAComponent_Builder">Utilisation de GoogleIMAComponent Builder</h3>
<p>Nous vous recommandons d'utiliser le Builder pour créer le <code translate="No">GoogleIMAComponent</code> exemple. Cela facilite la configuration du <code translate="No">GoogleIMAComponent</code>.</p>
<pre class="line-numbers"><code class="language-java" translate="No">googleIMAComponent = new GoogleIMAComponent.Builder(brightcoveVideoView, eventEmitter)
  .setUseAdRules(true)
  .setImaSdkSettings(customIMASDKSettings)
  .setAdsRenderingSettings(customAdsRenderingSettings)
  .setAdDisplayContainerFactory(customAdDisplayContainerFactory)
  .build();
}</code></pre>

<h3 id="Creating_the_AdDisplayContainer">Création de l'AdDisplayContainer</h3>
<p>Parce que le SDK Google IMA a été supprimé <code translate="No">AdsRequest.setAdDisplayContainer(...)</code> , le plugin Brightcove IMA le crée maintenant automatiquement, en utilisant le <code translate="No">GoogleIMAVideoAdPlayer</code> et le <code translate="No">BaseVideoView</code>.</p>
<p>Le plugin nécessite un <code translate="No">AdDisplayContainerFactory</code> pour créer le <code translate="No">AdDisplayContainer</code>.</p>
<pre class="line-numbers"><code class="language-java" translate="No">public interface AdDisplayContainerFactory {
  /**
  * Creates the AdDisplayContainer with the provided GoogleIMAVideoAdPlayer
  * and the ViewGroup retrieved with getViewContainer()
  *
  * @param googleIMAVideoAdPlayer the Brightcove Ad Player for Google IMA
  */
  AdDisplayContainer createAdDisplayContainer(GoogleIMAVideoAdPlayer googleIMAVideoAdPlayer);

  /**
  * Returns the ViewGroup container used for both,
  * the creation of the GoogleIMAVideoAdPlayer and the AdDisplayContainer
  */
  ViewGroup getViewContainer();
}
</code></pre>
<p>Sous le capot, le plugin utilise le <code translate="No">DefaultAdDisplayContainerFactory</code> , un <code translate="No">AdDisplayContainerFactory</code> , pour créer le <code translate="No">AdDisplayContainer</code>. Les <code translate="No">getViewContainer()</code> renvoie le <code translate="No">BaseVideoView</code> passé dans son constructeur, et le <code translate="No">createAdDisplayContainer</code> la méthode renvoie :</p>

<pre><code class="language-java" translate="No">ImaSdkFactory.createAdDisplayContainer(getViewContainer(), googleIMAVideoAdPlayer);</code></pre>

<h4>Ajoutez votre AdDisplayContainerFactory</h4>
<p>Si vous avez besoin d'une implémentation différente, vous devez passer votre propre <code translate="No">AdDisplayContainerFactory</code> à la <code translate="No">GoogleIMAComponent</code> Constructeur:</p>
<pre class="line-numbers"><code class="language-java" translate="No">googleIMAComponent = new GoogleIMAComponent.Builder(brightcoveVideoView, eventEmitter)
  .setAdDisplayContainerFactory(customAdDisplayContainerFactory)
  .build();
</code></pre>

<p>Si vous souhaitez diffuser les annonces dans une vue différente de celle de <code translate="No">BaseVideoView</code> , vous pouvez fournir le <code translate="No">DefaultAdDisplayContainerFactory</code> avec votre <code translate="No">ViewGroup</code>.</p>
<pre class="line-numbers"><code class="language-java" translate="No">googleIMAComponent = new GoogleIMAComponent.Builder(brightcoveVideoView, eventEmitter)
  .setAdDisplayContainerFactory(new DefaultAdDisplayContainerFactory(myViewGroup))
  .build();
</code></pre>

<h3 id="Deprecated_methods_in_GoogleIMAVideoAdPlayer">Méthodes obsolètes dans GoogleIMAVideoAdPlayer</h3>
<p>Les méthodes suivantes sont déconseillées dans le <code translate="No">GoogleIMAVideoAdPlayer</code> classer:</p>
<table class="bcls-table">
  <thead class="bcls-table__head">
    <tr>
      <!-- <th style="width:10%">Deprecated</th> -->
      <th>Méthode déconseillée</th>
      <th style="text-align:center";>Utiliser à la place</th>
    </tr>
  </thead>
  <tbody class="bcls-table__body">
    <tr>
      <td><code translate="No">playAd()</code></td>
      <td><code translate="No">playAd(AdMediaInfo)</code></td>
    </tr>
    <tr>
      <td><code translate="No">loadAd(String)</code></td>
      <td><code translate="No">loadAd(AdMediaInfo, AdPodInfo)</code></td>
    </tr>
    <tr>
      <td><code translate="No">stopAd()</code></td>
      <td><code translate="No">stopAd(AdMediaInfo)</code></td>
    </tr>
    <tr>
      <td><code translate="No">resumeAd()</code></td>
      <td><code translate="No">playAd(AdMediaInfo)</code></td>
    </tr>
    <tr>
      <td><code translate="No">pauseAd()</code></td>
      <td><code translate="No">pauseAd(AdMediaInfo)</code></td>
    </tr>
  </tbody>
</table>
<br/>
<p>Notez que les méthodes de remplacement nécessitent maintenant <code translate="No">AdMediaInfo</code>. Vous pouvez récupérer le courant <code translate="No">AdMediaInfo</code> objet en appelant <code translate="No">GoogleIMAVideoAdPlayer.getCurrentAdMediaInfo()</code>. Cela renverra le chargé <code translate="No">AdMediaInfo</code> , ou <code translate="No">Null</code>.</p>
</section>

<section class="bcls-section">
<h2 id="Migrating_to_the_IMA_Plugin_6_15_0">Migration vers le plugin IMA 6.15.0</h2>
<p>
  Pour migrer vers le plugin Brightcove IMA 6.15.0, suivez les étapes :
</p>
<ul>
  <li>
    <a href="#Update_dependency_versions">Mettre à jour les versions des dépendances</a>
  </li>
  <li>
    <a href="#Remove_deprecated_methods">Supprimer les méthodes obsolètes</a>
  </li>
</ul>

<h3 id="Update_dependency_versions">Mettre à jour les versions des dépendances</h3>
<p>Mettez à jour votre application pour utiliser les versions de dépendance suivantes :</p>
<ul>
  <li>
    Toutes les dépendances du SDK Brightcove définies sur la version 6.15.0
  </li>
  <li>
    Utiliser la version 3.19.4 du SDK IMA de Google
  </li>
  <li>
    Utiliser les services Google Play version 19.2.0
  </li>
</ul>
<p>Voici un exemple de <strong>build.gradle</strong> déposer:</p>
<pre class="line-numbers"><code class="language-java" translate="No">//build.gradle
dependencies {
 //Brightcove SDK dependencies
 implementation &quot;com.brightcove.player:android-sdk6.15.0:&quot;
 implementation &quot;com.brightcove.player:exoplayer2:6.15.0&quot;
 implementation &quot;com.brightcove.player:android-ima-plugin:6.15.0&quot;

 //Google IMA SDK
 implementation &quot;com.google.ads.interactivemedia.v3:interactivemedia:3.19.4&quot;

 //Google Play Services
 implementation &quot;com.google.android.gms:play-services-ads:19.2.0&quot;
 ...
}
</code></pre>

<h3 id="Remove_deprecated_methods">Supprimer les méthodes obsolètes</h3>
<p>Votre configuration Google IMA actuelle peut ressembler à ceci :</p>
<pre class="line-numbers"><code class="language-java" translate="No">AdDisplayContainer container = sdkFactory.createAdDisplayContainer();
container.setPlayer(googleIMAComponent.getVideoAdPlayer());
container.setAdContainer(brightcoveVideoView);
</code></pre>
<p>Ces trois méthodes sont obsolètes et disparaîtront.</p>
<p>Vous devez maintenant appeler <code translate="No">googleIMAComponent.getAdDisplayContainer()</code> et il retournera le <code translate="No">AdDisplayContainer</code> associé à la <code translate="No">GoogleIMAVideoAdPlayer</code> , ou null s'il n'est pas disponible.</p>
<p>Pour plus de détails sur la création du <code translate="No">AdDisplayContainer</code> , voir le <a href="#Creating_the_AdDisplayContainer">Création de l'AdDisplayContainer</a> section.</p>
<p>La méthode suivante a également été supprimée du SDK Google IMA :</p>
<pre><code class="language-java" translate="No">adsRequest.setAdDisplayContainer(container);
</code></pre>
<p>Utilisez plutôt le <code translate="No">AdDisplayContainer</code> pour créer une instance de l'IMA Google <code translate="No">AdsLoader</code>.</p>
<p>Pour plus d'informations sur les méthodes dépréciées et leurs remplacements, consultez le <a href="#Deprecated_methods_in_GoogleIMAVideoAdPlayer">Méthodes obsolètes dans GoogleIMAVideoAdPlayer</a> section.</p>
</section>

<section class="bcls-section">
<h2 id="More_information">Plus d'information</h2>
<p>Pour plus de détails sur les modifications IMA, consultez le <a href="https://developers.google.com/interactive-media-ads/docs/sdks/android/client-side/history">Historique des versions du SDK Google IMA Android</a> Documentation.</p>
<p>Pour toute question connexe, n'hésitez pas à contacter l'équipe Brightcove SDK via le <a href="https://groups.google.com/g/brightcove-native-player-sdks">Forum du SDK Brightcove</a>.</p>
</section>

</article>