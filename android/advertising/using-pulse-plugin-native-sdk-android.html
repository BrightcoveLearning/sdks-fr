---
title: Utilisation du plugin Pulse avec la description du SDK natif pour Android : Dans cette rubrique, vous apprendrez à utiliser le plug-in Pulse avec le SDK natif de Brightcove pour Android.
parent: Advertising 
grandparent: Android Development
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>


<section class="bcls-section">
<h2 id="Introduction">introduction</h2>
<p>Le plug-in Pulse de Brightcove vous permet d'intégrer le SDK Pulse d'Invidi au SDK natif Brightcove pour Android. Pulse est une plateforme de publicité vidéo. Pour les campagnes et les détails de configuration, consultez leur <a href="https://docs.invidi.com/reader/_hzObZcxZxk0Ct6OlYIk9A/RAeqPLOCQZ5XttfyEPlg~w">Mode d'emploi</a>.</p>
<aside class="bcls-aside bcls-aside--information"> Remarques:
  <ul>
    <li>
      Pris en charge avec le Brightcove Native SDK pour Android version 6.12 et supérieure.
    </li>
    <li>
      Cette fonctionnalité a été testée avec le SDK Pulse version 2.5.19.9.0. Nous vous recommandons d'utiliser cette version.
    </li>
  </ul>
</aside>
</section>

<section class="bcls-section">
<h2 id="Steps">Pas</h2>
<p>
  Une fois qu'une campagne est créée sur la plate-forme Pulse, vous pouvez commencer à utiliser le plug-in Pulse pour le Brightcove Native SDK pour Android. Suivez ces étapes pour intégrer le plug-in Pulse à votre projet :
</p>
<ol class="bcls-tasklist">
	<li>
    <p>
      Dans votre module <strong>build.gradle</strong> , ajoutez la dépendance du plugin Pulse.
    </p>
    <pre class="line-numbers"><code class="language-java" translate="No">dependencies {
    implementation 'com.brightcove.player:android-pulse-plugin:6.12.0'
}</code></pre>
  </li>
  <li>
    <p>
      Téléchargez le <a href="https://docs.invidi.com/reader/_hzObZcxZxk0Ct6OlYIk9A/H1FP_BHOo3Tcm3H29a73ww">Fichier .aar du SDK Pulse</a>.
    </p>
  </li>
  <li>
    <p>
      Dans ton <strong>application/librairies</strong> dossier, ouvrez le <strong>build.gradle</strong> fichier de votre module. Modifiez les éléments suivants :
    </p>
    <pre class="line-numbers"><code class="language-java" translate="No">dependencies {
    implementation fileTree(dir: 'libs', include: ['*.jar', <span class="bcls-highlight">'*.aar'</span>])
}</code></pre>
  </li>
  <li>
    <p>
      Dans ton <strong>MainActivity.java</strong> , initialisez le Pulse Plugin en instanciant un <code translate="No">PulseComponent</code> avec l'URL hôte Pulse créée pour votre campagne.
    </p>
    <pre class="line-numbers"><code class="language-java" translate="No">@Override
protected void onCreate(Bundle savedInstanceState) {
    // ...
    // Creating pulse component
    PulseComponent pulseComponent = new PulseComponent(
            &quot;<span class="bcls-input">your pulse host url</span>&quot;,
            brightcoveVideoView.getEventEmitter(),
            brightcoveVideoView);
    // ...
}</code></pre>
  </li>
  <li>
    <p>
      Met le <code translate="No">PulseComponent</code> Auditeur.
    </p>
    <pre class="line-numbers"><code class="language-java" translate="No">pulseComponent.setListener(new PulseComponent.Listener() {
  @NonNull
  @Override
  public PulseSession onCreatePulseSession(
    @NonNull String hostUrl,
    @NonNull Video video,
    @NonNull ContentMetadata contentMetadata,
    @NonNull RequestSettings requestSettings) {
    // See step 3a
    return Pulse.createSession(contentMetadata, requestSettings);
  }

  @Override
  public void onOpenClickthrough(@NonNull PulseVideoAd pulseVideoAd) {
  }
});</code></pre>
  </li>
  <li>
    <p>
      Mettre en œuvre le <code translate="No">onCreatePulseSession</code> méthode, qui crée une <code translate="No">PulseSession</code> et le renvoie au <code translate="No">PulseComponent</code>. Il y a trois paramètres :
    </p>
    <ul>
      <li>
        L'hôte d'impulsion
      </li>
      <li>
        Les paramètres de métadonnées de contenu
      </li>
      <li>
        Les paramètres de la demande
      </li>
    </ul>
    <br/>

    <pre class="line-numbers"><code class="language-java" translate="No">@NonNull
@Override
public PulseSession onCreatePulseSession(
    @NonNull String hostUrl,
    @NonNull Video video,
    @NonNull ContentMetadata contentMetadata,
    @NonNull RequestSettings requestSettings) {
  // Set the pulse Host:
  Pulse.setPulseHost(pulseHostUrl, null, null);

  // Content metadata settings
  contentMetadata.setCategory(&quot;skip-always&quot;);
  contentMetadata.setTags(Collections.singletonList(&quot;standard-linears&quot;));
  contentMetadata.setIdentifier(&quot;demo&quot;);

  // Request Settings:
  // Adding mid-rolls
  List&lt;Float&gt; midrollCuePoints = new ArrayList&lt;&gt;();
  midrollCuePoints.add(60f);
  requestSettings.setLinearPlaybackPositions(midrollCuePoints);

  // Create and return the PulseSession
  return Pulse.createSession(contentMetadata, requestSettings);
}</code></pre>
  </li>
  <li>
    <p>
      Mettre en œuvre le <code translate="No">onOpenClickthrough</code> méthode, qui est appelée lorsque le <strong>apprendre encore plus</strong> bouton d'une annonce linéaire est cliqué. Une action typique pour ce rappel consiste à ouvrir le navigateur avec l'URL attendue.
    </p>
    <pre class="line-numbers"><code class="language-java" translate="No">@Override
public void onOpenClickthrough(@NonNull PulseVideoAd pulseVideoAd) {
  Intent intent = new Intent(Intent.ACTION_VIEW)
    .setData(Uri.parse(pulseVideoAd.getClickthroughURL().toString()));
  brightcoveVideoView.getContext().startActivity(intent);
  pulseVideoAd.adClickThroughTriggered();
}</code></pre>
  </li>
  <li>
    <p>
      Jouez votre contenu
    </p>
    <pre class="line-numbers"><code class="language-java" translate="No">Catalog catalog = new Catalog.Builder(
  eventEmitter,
  getString(R.string.account))
  .setPolicy(getString(R.string.policy))
  .build();

catalog.findVideoByID(getString(R.string.videoId), new VideoListener() {
  // Add the video found to the queue with add().
  // Start playback of the video with start().
  @Override
  public void onVideo(Video video) {
    brightcoveVideoView.add(video);
    brightcoveVideoView.start();
  }
});</code></pre>
  </li>
</ol>
</section>

<section class="bcls-section">
<h2 id="Pulse_Pause_Ads">Annonces de pause d'impulsion</h2>
<p>Lorsque la campagne Pulse a configuré "Pause Ads", le plugin Pulse montrera à l'utilisateur lorsque le contenu est mis en pause.</p>
</section>

<section class="bcls-section">
<h2 id="Error_handling">La gestion des erreurs</h2>
<p>Toutes les erreurs seront signalées au développeur à l'aide de l'événement EventType.AD_ERROR, comme indiqué ci-dessous :</p>
<pre class="line-numbers"><code class="language-java" translate="No">eventEmitter.on(EventType.AD_ERROR, event -&gt; {
    Throwable error = event.getProperty(Event.ERROR, Throwable.class);
    Log.e(TAG, &quot;AD_ERROR: &quot;, error);
});</code></pre>
</section>

<section class="bcls-section">
<h2 id="UI_Customization">Personnalisation de l'interface utilisateur</h2>
<p>En interne, le plugin Pulse gonfle le <code translate="No">PulseAdView</code> en utilisant le <code translate="No">R.layout.pulse_ad_view</code> identifiant de mise en page Pour une mise en page différente, vous pouvez créer un fichier de mise en page avec le même nom et l'ajouter au <strong>res/disposition</strong> annuaire. Cela remplace la mise en page par défaut. </p>
<p>
  Utilisez les identifiants suivants pour remplacer les valeurs par défaut :
</p>
<figure class="bcls-figure">
  <img class="bcls-image--no-border" width="800" src="/assets/images/android/advertising/component-views.png/component-views.png" alt="Component Views">
  <figcaption class="bcls-caption--image">Vues des composants</figcaption>
</figure>
<table class="bcls-table">
  <thead class="bcls-table__head">
    <tr>
      <th>Indice</th>
      <th>Type de vue</th>
      <th>Afficher l'identifiant</th>
    </tr>
  </thead>
  <tbody class="bcls-table__body">
    <tr>
      <td>UNE</td>
      <td>Affichage</td>
      <td><code translate="No">pulse_ad_number_view</code></td>
    </tr>
    <tr>
      <td>B</td>
      <td>Affichage</td>
      <td><code translate="No">pulse_ad_countdown_view</code></td>
    </tr>
    <tr>
      <td>C</td>
      <td>Affichage</td>
      <td><code translate="No">pulse_ad_name_view</code></td>
    </tr>
    <tr>
      <td>ré</td>
      <td>Affichage</td>
      <td><code translate="No">pulse_ad_learn_more_view</code></td>
    </tr>
    <tr>
      <td>E</td>
      <td>Affichage</td>
      <td><code translate="No">pulse_skip_ad_view</code></td>
    </tr>
  </tbody>
</table>
</section>

<section class="bcls-section">
<h2 id="Complete_code_sample">Exemple de code complet</h2>
<p>Voici un exemple de code complet pour utiliser le plugin Pulse avec le SDK natif pour Android.</p>

<details>
    <summary><h2 id="Activity">Activité</h2></summary>
  <p>
    Voici un exemple du code d'activité complet :
  </p>
  <pre class="line-numbers"><code class="language-java" translate="No">public class MainActivity extends AppCompatActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
      setContentView(R.layout.activity_main);

      final BrightcoveVideoView videoView = findViewById(R.id.video_view);
      super.onCreate(savedInstanceState);

      EventEmitter eventEmitter = videoView.getEventEmitter();

      // Pulse setup
      PulseComponent pulseComponent = new PulseComponent(
          &quot;https://pulse-demo.videoplaza.tv&quot;,
          eventEmitter,
          videoView);

      pulseComponent.setListener(new PulseComponent.Listener() {
          @NonNull
          @Override
          public PulseSession onCreatePulseSession(
                @NonNull String pulseHostUrl,
                @NonNull Video video,
                @NonNull ContentMetadata contentMetadata,
                @NonNull RequestSettings requestSettings) {
            Pulse.setPulseHost(pulseHostUrl, null, null);
            contentMetadata.setCategory(&quot;skip-always&quot;);
            contentMetadata.setTags(Collections.singletonList(&quot;standard-linears&quot;));
            contentMetadata.setIdentifier(&quot;demo&quot;);

            // Adding mid-rolls
            List&lt;Float&gt; midrollCuePoints = new ArrayList&lt;&gt;();
            midrollCuePoints.add(60f);
            requestSettings.setLinearPlaybackPositions(midrollCuePoints);

            return Pulse.createSession(
              contentMetadata,
              requestSettings);
          }

          @Override
          public void onOpenClickthrough(@NonNull PulseVideoAd ad) {
            Intent intent = new Intent(Intent.ACTION_VIEW)
              .setData(Uri.parse(ad.getClickthroughURL().toString()));
            videoView.getContext().startActivity(intent);
            ad.adClickThroughTriggered();
          }
      });

      Catalog catalog = new Catalog.Builder(eventEmitter, &quot;YourAccountId&quot;)
          .setPolicy(&quot;YourPolicyKey&quot;)
          .build();
      catalog.findVideoByID(&quot;YourVideoId&quot;, new VideoListener() {

        // Add the video found to the queue with add().
        // Start playback of the video with start().
        @Override
        public void onVideo(Video video) {
          videoView.add(video);
          videoView.start();
        }
      });
    }
  }</code></pre>
</details>
<br/>

<details>
    <summary><h2 id="Layout">Disposition</h2></summary>
  <p>
    Voici un exemple de code de mise en page pour le <code translate="No">R.layout.pulse_ad_view</code>.
  </p>
  <pre class="line-numbers"><code class="language-xml" translate="No">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
  &lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
      xmlns:tools=&quot;http://schemas.android.com/tools&quot;
      android:layout_width=&quot;match_parent&quot;
      android:layout_height=&quot;match_parent&quot;&gt;

      &lt;RelativeLayout
          android:id=&quot;@+id/view_ad_details&quot;
          android:layout_width=&quot;match_parent&quot;
          android:layout_height=&quot;wrap_content&quot;
          android:background=&quot;@drawable/pulse_skip_button_background_selector&quot;&gt;

          &lt;TextView
              android:id=&quot;@+id/pulse_ad_name_view&quot;
              android:layout_width=&quot;wrap_content&quot;
              android:layout_height=&quot;wrap_content&quot;
              android:layout_alignParentTop=&quot;true&quot;
              android:layout_marginTop=&quot;4dp&quot;
              android:paddingTop=&quot;4dp&quot;
              android:paddingStart=&quot;8dp&quot;
              android:paddingEnd=&quot;8dp&quot;
              android:textColor=&quot;@color/white&quot;
              android:background=&quot;@color/bmc_live&quot;
              android:textStyle=&quot;bold&quot;
              tools:text=&quot;Preroll blue&quot;/&gt;

          &lt;TextView
              android:id=&quot;@+id/pulse_ad_number_view&quot;
              android:layout_width=&quot;wrap_content&quot;
              android:layout_height=&quot;wrap_content&quot;
              android:paddingStart=&quot;8dp&quot;
              android:paddingEnd=&quot;4dp&quot;
              android:paddingBottom=&quot;4dp&quot;
              android:layout_marginBottom=&quot;8dp&quot;
              android:layout_below=&quot;@id/pulse_ad_name_view&quot;
              android:textColor=&quot;@color/white&quot;
              android:background=&quot;@color/white_semi_trans&quot;
              tools:text=&quot;Ad (1 of 2)&quot;/&gt;

          &lt;TextView
              android:id=&quot;@+id/pulse_ad_countdown_view&quot;
              android:layout_width=&quot;wrap_content&quot;
              android:layout_height=&quot;wrap_content&quot;
              android:paddingStart=&quot;4dp&quot;
              android:paddingEnd=&quot;4dp&quot;
              android:paddingBottom=&quot;4dp&quot;
              android:layout_marginBottom=&quot;4dp&quot;
              android:layout_below=&quot;@id/pulse_ad_name_view&quot;
              android:layout_toEndOf=&quot;@+id/pulse_ad_number_view&quot;
              android:textColor=&quot;@color/green_almost_opaque&quot;
              android:text=&quot;&quot;
              tools:text=&quot;00:06&quot;/&gt;

          &lt;TextView
              android:id=&quot;@+id/pulse_ad_learn_more_view&quot;
              android:layout_width=&quot;wrap_content&quot;
              android:layout_height=&quot;wrap_content&quot;
              android:layout_marginStart=&quot;@dimen/pulse_ad_learn_more_margin_left&quot;
              android:layout_marginTop=&quot;@dimen/pulse_ad_learn_more_margin_top&quot;
              android:layout_marginEnd=&quot;@dimen/pulse_ad_learn_more_margin_right&quot;
              android:layout_marginBottom=&quot;@dimen/pulse_ad_learn_more_margin_bottom&quot;
              android:layout_alignTop=&quot;@id/pulse_ad_name_view&quot;
              android:layout_alignBottom=&quot;@id/pulse_ad_countdown_view&quot;
              android:layout_alignParentEnd=&quot;true&quot;
              android:background=&quot;@drawable/pulse_learn_more_button_background&quot;
              android:paddingStart=&quot;12dp&quot;
              android:paddingEnd=&quot;12dp&quot;
              android:padding=&quot;@dimen/pulse_ad_learn_more_padding_default&quot;
              android:gravity=&quot;center&quot;
              android:shadowColor=&quot;@color/brightcove_semitransparent&quot;
              android:shadowDx=&quot;-1&quot;
              android:shadowDy=&quot;1&quot;
              android:shadowRadius=&quot;1.5&quot;
              android:text=&quot;@string/pulse_message_learn_more&quot;
              android:textColor=&quot;@color/pulse_button_text_color&quot;
              android:nextFocusUp=&quot;@id/pulse_skip_ad_view&quot;
              android:textSize=&quot;@dimen/pulse_message_text_size&quot;
              android:visibility=&quot;gone&quot;
              tools:visibility=&quot;visible&quot; /&gt;

      &lt;/RelativeLayout&gt;

      &lt;TextView
          android:id=&quot;@+id/pulse_skip_ad_view&quot;
          android:layout_width=&quot;wrap_content&quot;
          android:layout_height=&quot;wrap_content&quot;
          android:maxWidth=&quot;164dp&quot;
          android:layout_alignParentEnd=&quot;true&quot;
          android:layout_centerVertical=&quot;true&quot;
          android:layout_marginBottom=&quot;@dimen/pulse_skip_ad_margin_bottom&quot;
          android:background=&quot;@drawable/pulse_skip_button_background_selector&quot;
          android:ellipsize=&quot;none&quot;
          android:gravity=&quot;center&quot;
          android:maxLines=&quot;2&quot;
          android:paddingStart=&quot;@dimen/pulse_skip_ad_padding_left&quot;
          android:paddingEnd=&quot;@dimen/pulse_skip_ad_padding_right&quot;
          android:paddingTop=&quot;@dimen/pulse_skip_ad_padding&quot;
          android:paddingBottom=&quot;@dimen/pulse_skip_ad_padding&quot;
          android:scrollHorizontally=&quot;false&quot;
          android:shadowColor=&quot;@color/brightcove_shadow&quot;
          android:shadowDx=&quot;-1&quot;
          android:shadowDy=&quot;1&quot;
          android:shadowRadius=&quot;1.5&quot;
          android:text=&quot;@string/pulse_message_skip_ad&quot;
          android:textColor=&quot;@color/pulse_button_text_color&quot;
          android:textSize=&quot;@dimen/pulse_message_text_size&quot;
          android:visibility=&quot;gone&quot;
          android:nextFocusUp=&quot;@id/pulse_ad_learn_more_view&quot;
          android:focusable=&quot;true&quot;
          tools:visibility=&quot;visible&quot;/&gt;

  &lt;/RelativeLayout&gt;
  </code></pre>
</details>
</section>
</article>