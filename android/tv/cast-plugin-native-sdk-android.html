---
title: 'Plugin Cast pour le SDK natif pour Android' la
description: Dans cette rubrique, vous apprendrez à diffuser vos vidéos sur un téléviseur connecté à Chromecast, à l'aide du plug-in Cast pour le Brightcove Native SDK pour Android.
parent: Connected TV 
grandparent: Android Development
layout: staging
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>

<section class="bcls-section">
<h2 id="Overview">Aperçu</h2>

<p>Avec <a href="https://developers.google.com/cast/docs/developers">Google Cast</a> technologie, vous pouvez lancer et contrôler le contenu vidéo diffusé depuis vos appareils mobiles vers la télévision haute définition et les systèmes audio domestiques. Depuis votre application, appuyez sur le bouton Cast pour diffuser votre contenu sur un grand écran.</p>

<p>Pour créer une application Cast, vous avez besoin des composants suivants :</p>

<ul>
	<li>
	<p>UNE <strong>demande de l'expéditeur</strong> - Il réside sur votre appareil mobile et détecte les appareils récepteurs, établit une connexion sécurisée et reflète votre contenu. L'application émettrice est le lecteur local utilisé pour diffuser du contenu vers l'application réceptrice sur votre appareil Chromecast. Après avoir diffusé sur l'application du récepteur, vous pouvez la considérer comme une télécommande pour le Chromecast.</p>

	<p>L'application de l'expéditeur est fournie par le plug-in Cast pour le Brightcove Native SDK pour Android. Vous en apprendrez plus dans ce sujet.</p>
	</li>
	<li>
	<p>UNE <strong>demande de réception</strong> - Cette application s'exécute sur l'appareil Chromecast. Il peut être considéré comme une application HTML d'une seule page avec des ressources CSS et JavaScript.</p>

	<p>Pour tester, suivez ces étapes :</p>

	<ol class="bcls-tasklist">
		<li>Commencer avec <a href="https://github.com/googlecast/CastReceiver">Exemple de récepteur Cast de Google</a></li>
		<li>Revoir <a href="https://developers.google.com/cast/docs/sample-apps#castreceiver">Applications Google Cast</a> Documentation</li>
	</ol>

	<p>Pour une utilisation en production, ce document illustrera comment utiliser le Brightcove Receiver v2.0.0.</p>
	</li>
</ul>

<aside class="bcls-aside bcls-aside--information">
  <p>Remarques:</p>
  <ol>
    <li>Google ne prend pas en charge l'utilisation de son application de réception de démonstration dans un environnement de production.</li>
    <li>Le plug-in Cast pour le Brightcove Native SDK pour Android ne fournit pas de fonctionnalité d'application de récepteur.</li>
  </ol>
  </aside>
</section>

<section class="bcls-section">
<h2 id="Supported_SDK_version">Version SDK prise en charge</h2>
<p>Pour utiliser le plug-in Cast avec le nouveau Brightcove Receiver v2.0, vous devez utiliser le Brightcove Native SDK pour Android version 6.16.0 et supérieure.</p>
</section>

<section class="bcls-section">
<h2 id="Understanding_the_Cast_plugin">Comprendre le plugin Cast</h2>
<p>Le plugin Cast est construit au-dessus du <a href="https://medium.com/google-exoplayer/new-cast-extension-and-demo-app-55816a50012">nouvelle extension de diffusion ExoPlayer</a> et le cadre de diffusion des services Google Play. Après avoir ajouté la dépendance du plug-in Cast, gradle extraira la dépendance Play Services Cast Framework, la dépendance ExoPlayer Cast Extension ainsi que d'autres dépendances nécessaires.</p>

<p>Le plugin Cast a été repensé pour minimiser vos efforts lors de l'intégration avec Video Cloud. Lors de l'utilisation de Video Cloud, le <code translate="No">BrightcoveCastMediaManager</code> la classe recueille des informations à partir de la réponse Video Cloud, comme le Brightcove <code translate="No">Video</code> et <code translate="No">Source</code> objets, chaque fois que le <code translate="No">EventType.SET_SOURCE</code> événement est émis. Ces informations sont mises en cache et prêtes à être utilisées lorsque l'utilisateur sélectionne la lecture pour mettre la vidéo en file d'attente.</p>
</section>

<section class="bcls-section">
<h2 id="Integrating_the_Cast_plugin">Intégration du plugin Cast</h2>
<p>Il existe deux manières d'intégrer votre application au plug-in Native SDK for Android Cast. Vous pouvez intégrer le Brightcove Cast Receiver v2.0 ou le Google Cast Demo Receiver.</p>
<p>Pour l'une ou l'autre intégration, vous devez ajouter cette dépendance à votre projet d'application :</p>
<pre>
<code class="language-java" translate="No">implementation &quot;com.brightcove.player:android-cast-plugin:6.16.0&quot;</code></pre>

<h3 id="Using_the_Brightcove_Cast_Receiver_v2">Utilisation du récepteur Brightcove Cast v2.0</h3>
<p>Cette intégration est destinée aux clients Brightcove qui utilisent les API Brightcove pour diffuser leur contenu.</p>
<p>Pour un exemple de code complet, consultez le <a href="https://github.com/BrightcoveOS/android-player-samples/tree/master/brightcove-exoplayer/BasicCastBrightcoveReceiverSampleApp">BasicCastBrightcoveReceiverSampleApp</a>.</p>

<h3 id="Using_the_Google_Cast_Demo_Receiver">Utilisation du récepteur de démonstration Google Cast</h3>
<p>Cette intégration est destinée aux clients Brightcove qui débutent dans le casting.</p>
<p>Pour un exemple de code complet, consultez le <a href="https://github.com/BrightcoveOS/android-player-samples/tree/master/brightcove-exoplayer/BasicCastGoogleReceiverSampleApp">BasicCastGoogleReceiverSampleApp</a>.</p>
<aside class="bcls-aside bcls-aside--tip">Les <strong>BasicCastGoogleReceiverSampleApp</strong> exemple d'application était auparavant connu sous le nom de <strong>BasicCastSampleApp</strong></aside>

<h4 id="Specifying_your_own_Cast_Receiver_App_Id">Spécification de votre propre identifiant d'application Cast Receiver</h4>
<p>Les <strong>BasicCastGoogleReceiverSampleApp</strong> définit un identifiant d'application Google Demo Receiver, qui peut être utile pour démarrer et tester, mais pas pour la production.</p>
<p>Pour remplacer cette valeur par votre application Cast Receiver, définissez la valeur de chaîne suivante dans l'exemple d'application <strong>chaînes.xml</strong> déposer:</p>
<pre>
<code class="language-java" translate="No">&lt;string name=&quot;cast_receiver_app_id&quot;&gt;4F8B3483&lt;/string&gt;</code></pre>
</section>

<section class="bcls-section">
<h2 id="The_Brightcove_GoogleCastComponent">Le composant Brightcove GoogleCast</h2>

<p>Les <code translate="No">GoogleCastComponent</code> class est la classe principale du plugin Brightcove Cast. Il instancie l'ExoPlayer CastPlayer et définit ses écouteurs. Il expose quelques méthodes essentielles pour charger une vidéo ou l'ajouter à la file d'attente. Les <code translate="No">GoogleCastComponent</code> La classe ajoute également plusieurs écouteurs d'événements Brightcove pour gérer les événements de cycle de vie des activités et des fragments, ainsi que d'autres écouteurs d'événements que vous pouvez utiliser pour émettre des informations multimédias afin de charger une vidéo sur votre appareil Chromecast.</p>

<p>Les <code translate="No">GoogleCastComponent</code> utilise maintenant un modèle Builder. Dans les versions natives du SDK pour Android antérieures à la v6.16.0, vous deviez instancier le composant et passer le <code translate="No">Context</code> et <code translate="No">EventEmitter</code> à la <code translate="No">GoogleCastComponent</code> constructeur. Ensuite, vous définiriez les options du composant dans une série d'appels de méthode distincts.</p>
<p>À partir du SDK natif pour Android v6.16.0, utilisez le modèle Builder pour créer une instance du <code translate="No">GoogleCastComponent</code> et définissez ses options, le tout dans une seule chaîne d'appels de méthode Builder.</p>
</section>

<section class="bcls-section">
<h2 id="CustomData">Données personnalisées</h2>
<p>Comme avec le <code translate="No">GoogleCastComponent</code> , les <code translate="No">CustomData</code> La classe utilise un modèle Builder pour instancier l'objet et lui ajouter des propriétés. Bien que le récepteur Brightcove puisse utiliser <code translate="No">CustomData</code> pour récupérer des vidéos de votre catalogue Brightcove, il n'est pas nécessaire d'envoyer un <code translate="No">CustomData</code> objet, par exemple pour diffuser une ressource distante. Il est également important de noter que lors de l'utilisation de Google Demo Receiver, l'utilisation de <code translate="No">CustomData</code> n'est pas pris en charge. Aux fins de cette discussion, nous nous concentrerons sur <code translate="No">CustomData</code> envoyé au récepteur utilisé pour récupérer les données vidéo du catalogue Brightcove.</p>

<h3>Qu'est-ce que CustomData ?</h3>
<p><code translate="No">CustomData</code> est un objet JSON contenu dans le <code translate="No">MediaInfo</code> objet. Son utilisation prévue est avec l'application Brightcove Cast Receiver v2.0.</p>

<h3>CustomData avec le récepteur Brightcove et les données de catalogue</h3>
<p>Lors de l'intégration avec le récepteur Brightcove, le <code translate="No">CustomData</code> L'objet JSON prendra cette forme :</p>
<pre>
<code class="language-java" translate="No">&quot;customData&quot;: {
	&quot;accountId&quot;: &quot;1234567890&quot;,
	&quot;analyticsParams&quot;: {
		&quot;application&quot;: &quot;com.brightcove.player.test&quot;,
		&quot;user&quot;: &quot;abcde1c44b951234&quot;
	},
	&quot;catalogParams&quot;: {
		&quot;adConfigId&quot;: null,
		&quot;type&quot;: &quot;video&quot;,
		&quot;bcovAuthToken&quot;: null,
		&quot;id&quot;: &quot;2345678901&quot;,
		&quot;policyKey&quot;: &quot;BCpkPolicyKeyObject&quot;
	}
}
</code></pre>

<p>Les <code translate="No">CustomData</code> L'exemple d'objet ci-dessus contient tous les éléments de données nécessaires pour diffuser une vidéo à partir du récepteur Brightcove. Ces données sont les mêmes quel que soit le cryptage, c'est-à-dire qu'il n'y a pas de structure supplémentaire nécessaire pour l'URL de licence dans le cas des vidéos DRM.</p>
<p>Vous pouvez également trouver un exemple de <code translate="No">CustomData</code> objet dans le <strong>BrightcoveCastBrightcoveReceiverSampleApp</strong>.</p>

<h3>CustomData avec le récepteur de démonstration Google</h3>
<p>Comme indiqué ci-dessus, <code translate="No">CustomData</code> n'est pas pris en charge avec le récepteur de démonstration Google.</p>

</section>

<section class="bcls-section">
<h2 id="BrightcoveCastMediaManager">BrightcoveCastMediaManager</h2>

<p>Il est possible d'étendre le <code translate="No">BrightcoveCastMediaManager</code> , comme indiqué ci-dessus, pour remplacer ses méthodes ou pour implémenter les vôtres. Pour des exemples d'extension de la classe BrightcoveCastMediaManager, consultez ce qui suit :</p>
<ul>
  <li>Étendre la section BrightcoveCastMediaManager</li>
  <li>BasicCastCustomRemoteVideoSampleApp</li>
</ul>
</section>

<section class="bcls-section">
<h2 id="OptionsProvider">Fournisseur d'options</h2>

<p>Ensuite, vous devez spécifier le <a href="https://developers.google.com/android/reference/com/google/android/gms/cast/framework/OptionsProvider">Fournisseur d'options</a> implémentation pour le framework Google Cast. Les <code translate="No">OptionsProvider</code> l'interface permet de configurer plusieurs options nécessaires pour initialiser le <a href="https://developers.google.com/android/reference/com/google/android/gms/cast/framework/CastContext">Contexte de diffusion</a> classer. C'est ici que vous définirez l'ID de l'application Cast Receiver. Pour en savoir plus sur l'intégration des <code translate="No">OptionsProvider</code> , voir Google <a href="https://developers.google.com/cast/docs/android_sender_integrate#initialize_the_cast_context">Initialiser le contexte de diffusion</a> document.</p>
<p>Le plugin Brightcove Cast comprend un <code translate="No">DefaultOptionsProvider</code> classe, où l'ID d'application du récepteur Cast est défini via une clé de chaîne définie dans le <strong>chaînes.xml</strong> fichier de ressources. Pour plus de détails et pour savoir comment l'ignorer dans votre application, consultez le <a href="#Using_your_own_Cast_Receiver_App_Id">Utiliser votre propre identifiant d'application Cast Receiver</a> rubrique ci-dessus.</p>
<p>Que vous utilisiez le <code translate="No">DefaultOptionsProvider</code> classe ou la vôtre <code translate="No">OptionsProvider</code> mise en œuvre, vous devez définir le <code translate="No">OptionsProvider</code> nom de la classe d'implémentation dans votre application <strong>AndroidManifest.xml</strong> fichier en tant que métadonnées de paire clé-valeur, comme indiqué ici :</p>
<pre>
<code class="language-java" translate="No">&lt;meta-data android:name=&quot;com.google.android.gms.cast.framework.OPTIONS_PROVIDER_CLASS_NAME&quot; android:value=&quot;com.brightcove.cast.DefaultOptionsProvider&quot; /&gt;</code></pre>
<p>Si vous utilisez le <code translate="No">DefaultOptionsProvider</code> classe, vous pouvez définir le <code translate="No">ExpandedControllerActivity</code> pour activer/désactiver la notification de diffusion en définissant des informations de métadonnées similaires dans votre <strong>AndroidManifeste</strong>.</p>
</section>

<section class="bcls-section">
<h2 id="Expanded_Controller_Activity">Activité de contrôleur étendue</h2>

<p>Les <a href="https://developers.google.com/android/reference/com/google/android/gms/cast/framework/media/widget/ExpandedControllerActivity">Activité de contrôleur étendue</a> est fourni avec la bibliothèque Google Cast et vous permet de contrôler la vidéo en cours de diffusion sur votre appareil Chromecast. Cette classe offre une certaine flexibilité de personnalisation. Par exemple, cinq emplacements sont disponibles pour afficher les boutons, le troisième emplacement étant réservé au bouton Lecture non configurable. Le reste des boutons peut être défini comme d'autres boutons prédéfinis ou comme vos propres boutons personnalisés.</p>

<p>Le plugin Brightcove Cast fournit la sous-classe <code translate="No">DefaultExpandedControllerActivity</code>. Nous avons activé les boutons suivants dans l'ordre suivant :</p>

<ul>
	<li><strong>Sous-titres codés</strong></li>
	<li><strong>Passer le précédent</strong></li>
	<li><strong>Jouer</strong></li>
	<li><strong>Passez au suivant</strong></li>
	<li><strong>Basculement Muet</strong></li>
</ul>

<p>De plus, la barre de recherche définit le même dessin par défaut que celui utilisé dans la norme <code translate="No">BrightcoveMediaController</code>:</p>

<ul>
	<li>Le progrès dessinable :
	<pre>
<code class="language-java" translate="No">R.drawable.default_scrubber_progress_horizontal</code></pre>
	</li>
	<li>Le pouce dessinable :
	<pre>
<code class="language-java" translate="No">R.drawable.default_scrubber_thumb</code></pre>
	</li>
</ul>

<p>Pour savoir comment personnaliser la barre de recherche, consultez le <a href="https://github.com/BrightcoveOS/android-player-samples/tree/master/brightcove-player-controls/SeekBarColorsSampleApp/src/main">SeekBarColorsSampleApp</a>.</p>

<p>Afin de définir le <code translate="No">DefaultExpandedControllerActivity</code> ou le vôtre <code translate="No">ExpandedControllerActivity</code> , définissez les métadonnées suivantes dans votre <strong>AndroidManifest.xml</strong> déposer:</p>
<pre class="line-numbers">
<code class="language-java" translate="No">&lt;meta-data  android:name="com.brightcove.cast.DefaultOptionsProvider.EXPANDED_CONTROLLER_ACTIVITY_CLASS_NAME"
android:value="com.brightcove.cast.DefaultExpandedControllerActivity" /&gt;</code></pre>
</section>

<section class="bcls-section">
<h2 id="Cast_Notification">Notification de diffusion</h2>

<p>Lorsque la notification de diffusion est activée, la notification apparaît lorsque vous diffusez une vidéo et placez votre application en arrière-plan ; par exemple, après avoir appuyé sur la touche d'accueil.</p>
&lt;pPour activer la notification de diffusion, définissez les métadonnées suivantes dans votre <strong>AndroidManifest.xml</strong> et indiquez le nom de l'activité à lancer lorsque vous cliquez sur la notification :</p>
<pre class="line-numbers">
<code class="language-java" translate="No">&lt;meta-data android:name="com.brightcove.cast.DefaultOptionsProvider.NOTIFICATION_TARGET_ACTIVITY_CLASS_NAME"
android:value="com.brightcove.cast.BrightcoveControllerActivity" /&gt;</code></pre>

<p>Si vous ne fournissez pas com.brightcove.cast.DefaultOptionsProvider.NOTIFICATION_TARGET_ACTIVITY_CLASS_NAME ou si la valeur a un nom d'activité non valide, la notification de diffusion sera désactivée.</p>

<aside class="bcls-aside bcls-aside--information">Tout en supprimant le <code translate="No">meta-data</code> étiquette de la <strong>AndroidManifest.xml</strong> le fichier désactivera les notifications de l'application de l'expéditeur, il sera toujours possible d'afficher une notification sur l'appareil expéditeur indiquant qu'un appareil diffuse sur votre réseau Wi-Fi. Il ne s'agit pas d'une notification de l'application de l'expéditeur, mais plutôt d'une notification de l'appareil expéditeur, indépendante de toute configuration de l'application.</aside>
</section>

<section class="bcls-section">
<h2 id="The_Cast_Button">Le bouton Cast</h2>

<p>Le bouton Cast vous permet de sélectionner un appareil Chromecast sur le même réseau que votre appareil, et vous permet de vous connecter et de créer une session. Pour ajouter le bouton Cast à votre application, suivez les instructions de Google <a href="https://developers.google.com/cast/docs/android_sender_integrate#add_a_cast_button">Intégrer Cast : Ajouter un bouton Cast</a> document.</p>
<p>Le plugin Brightcove Cast fournit une méthode utilitaire pour configurer facilement le bouton Cast. Ceci est utile lorsque vous souhaitez simplement ajouter le bouton Diffuser au menu Activité/Fragment. Voir le code suivant pour plus de détails :</p>
	<pre class="line-numbers">
<code class="language-java" translate="No">//Activity
@Override
public boolean onCreateOptionsMenu(Menu menu) {
   super.onCreateOptionsMenu(menu);
   GoogleCastComponent.setUpMediaRouteButton(MainActivity.this, menu);
   return true;
}</code></pre>
</section>

<section class="bcls-section">
<h2 id="The_Mini_Controller">Le mini contrôleur</h2>

<p>Le mini contrôleur est un fragment qui s'attache à votre activité, généralement situé au bas de la mise en page. Le mini contrôleur vous permet de lire et de mettre en pause la vidéo, et indique quand une vidéo est en cours de lecture sur votre appareil Chromecast. Lorsque le mini contrôleur est cliqué, le contrôleur étendu sera lancé.</p>
<p>Pour activer le mini contrôleur, ajoutez le code suivant à la mise en page de votre activité.</p>
	<pre class="line-numbers">
<code class="language-java" translate="No">&lt;fragment
   android:id="@+id/castMiniController"
   android:layout_width="match_parent"
   android:layout_height="wrap_content"
   android:layout_alignParentBottom="true"
   android:visibility="gone"
   class="com.google.android.gms.cast.framework.media.widget.MiniControllerFragment" /&gt;</code></pre>

<p>Pour découvrir les meilleures pratiques avec le mini contrôleur, consultez le <a href="https://developers.google.com/cast/docs/design_checklist/sender#sender-mini-controller">Liste de contrôle de conception : Expéditeur Mini Contrôleur</a> document. Pour plus de détails sur la mise en œuvre, consultez le <a href="https://developers.google.com/cast/docs/android_sender_integrate#add_mini_controller">Intégrer Cast : Ajouter un mini contrôleur</a> document.</p>
</section>

<section class="bcls-section">
<h2 id="Advanced_Topics">Sujets avancés</h2>

<h3 id="Listening_for_Cast_session">Écoute de la session Cast</h3>

<p>Si vous souhaitez que votre application réagisse lorsque la connexion Cast démarre ou se termine, vous pouvez ajouter le <code translate="No">GoogleCastEventType.CAST_SESSION_STARTED</code> ou <code translate="No">GoogleCastEventType.CAST_SESSION_ENDED</code> écouteurs d'événement comme indiqué ici :</p>

<pre class="line-numbers">
<code class="language-java" translate="No">eventEmitter.on(GoogleCastEventType.CAST_SESSION_STARTED, new EventListener() {
   @Override
   public void processEvent(Event event) {
       // Session Started
   }
});
eventEmitter.on(GoogleCastEventType.CAST_SESSION_ENDED, new EventListener() {
   @Override
   public void processEvent(Event event) {
       // Session Ended
   }
});</code></pre>

<p>Alternativement, vous pouvez appeler <code translate="No">GoogleCastComponent.isSessionAvailable()</code> pour vérifier une session disponible.</p>

<h3 id="Casting_a_Video">Caster une vidéo</h3>

<p>Afin de diffuser une vidéo sur Chromecast après une connexion réussie, vous pouvez soit utiliser EventEmitter et émettre les informations d'informations sur le média, soit utiliser directement le <code translate="No">GoogleCastComponent</code> méthodes.</p>

<p>Si vous préférez émettre les infos média, vous pouvez utiliser les événements suivants :</p>

<ul>
	<li><code translate="No">GoogleCastEventType.LOAD_MEDIA_INFO</code></li>
	<li><code translate="No">GoogleCastEventType.LOAD_MEDIA_QUEUE_ITEM</code></li>
	<li><code translate="No">GoogleCastEventType.ADD_MEDIA_INFO</code></li>
	<li><code translate="No">GoogleCastEventType.ADD_MEDIA_QUEUE_ITEM</code></li>
</ul>

<p>Le tableau suivant présente les propriétés attendues pour chaque événement :</p>

<table class="bcls-table">
	<thead class="bcls-table__head">
		<tr>
			<th rowspan="2">Nom de l'événement</th>
			<th colspan="2">Propriétés</th>
		</tr>
		<tr>
			<th>Clé</th>
			<th>Type de classe de valeur</th>
		</tr>
	</thead>
	<tbody class="bcls-table__body">
		<tr>
			<td><code translate="No">LOAD_MEDIA_INFO</code></td>
			<td><code translate="No">GoogleCastComponent.CAST_MEDIA_INFO</code><br />
			<code translate="No">GoogleCastComponent.CAST_MEDIA_PLAY_POSITION</code></td>
			<td><code translate="No">MediaInfo</code> Entier</td>
		</tr>
		<tr>
			<td><code translate="No">LOAD_MEDIA_QUEUE_ITEM</code></td>
			<td><code translate="No">GoogleCastComponent.CAST_MEDIA_QUEUE_ITEM</code></td>
			<td><code translate="No">MediaQueueItem</code></td>
		</tr>
		<tr>
			<td><code translate="No">ADD_MEDIA_INFO</code></td>
			<td><code translate="No">GoogleCastComponent.CAST_MEDIA_INFO</code><br />
			<code translate="No">GoogleCastComponent.CAST_MEDIA_PLAY_POSITION</code></td>
			<td><code translate="No">MediaInfo</code> Entier</td>
		</tr>
		<tr>
			<td><code translate="No">ADD_MEDIA_QUEUE_ITEM</code></td>
			<td><code translate="No">GoogleCastComponent.CAST_MEDIA_QUEUE_ITEM</code></td>
			<td><code translate="No">MediaQueueItem</code></td>
		</tr>
	</tbody>
</table>
<br/>
<p>Alternativement, vous pouvez utiliser ce qui suit <code translate="No">GoogleCastComponent</code> méthodes :</p>

<ul>
	<li>
	<pre>
<code class="language-java" translate="No">public void loadMediaInfo(MediaInfo mediaInfo, long positionMs)</code></pre>
	</li>
	<li>
	<pre>
<code class="language-java" translate="No">public void loadMediaInfo(MediaInfo mediaInfo)</code></pre>
	</li>
	<li>
	<pre>
<code class="language-java" translate="No">public PendingResult&lt;RemoteMediaClient.MediaChannelResult&gt; loadItem(MediaQueueItem mediaQueue, int playheadPosition)</code></pre>
	</li>
	<li>
	<pre>
<code class="language-java" translate="No">public PendingResult&lt;RemoteMediaClient.MediaChannelResult&gt; addItems(MediaQueueItem... mediaQueue )</code></pre>
	</li>
</ul>

<h3 id="Changing_the_default_MediaInfo_data">Modification des données MediaInfo par défaut</h3>

<p>Par défaut, le plugin Cast rassemble des informations sur l'objet Video et Source actuel émis par le <code translate="No">EventType.SET_SOURCE event</code>. Si vous souhaitez modifier ou ajouter des informations supplémentaires, telles que l'ajout d'un objet JSON personnalisé à votre <code translate="No">MediaInfo</code> que votre récepteur d'application comprend, vous pouvez le faire en écrasant le <code translate="No">loadMediaInfo()</code> et <code translate="No">addMediaInfo()</code> méthodes de la <code translate="No">BrightcoveCastMediaManager</code>. Ensuite, votre <code translate="No">BrightcoveCastMediaManager</code> la sous-classe est passée en tant que paramètre de constructeur à la <code translate="No">GoogleCastComponent</code> classer.</p>

<p>A l'intérieur de ces méthodes, vous pouvez créer votre <code translate="No">MediaInfo</code> objets et émettre les événements appropriés comme indiqué précédemment. Assurez-vous de vérifier <code translate="No">com.brightcove.cast.util.CastMediaUtil</code> , car il fournit des méthodes utilitaires pour créer un <code translate="No">MediaInfo</code> à partir des objets Vidéo et Source.</p>

<h3 id="Configuring_the_Cast_MediaController">Configuration du Cast MediaController</h3>

<p>Pour modifier la disposition du contrôleur qui apparaît dans votre vue vidéo Brightcove lorsqu'une session Cast a démarré, procédez comme suit.</p>

<ol class="bcls-tasklist-restart">
	<li><a href="#Extend_the_BrightcoveCastMediaManager">Étendre le BrightcoveCastMediaManager</a></li>
	<li><a href="#Set_the_MediaControllerConfig">Définir le MediaControllerConfig</a></li>
	<li><a href="#Overwrite_the_control_bar_setup">Écraser la configuration de la barre de contrôle</a></li>
</ol>

<h4 id="Extend_the_BrightcoveCastMediaManager">Étendre le BrightcoveCastMediaManager</h4>

<p>Pour modifier le comportement par défaut du <code translate="No">BrightcoveCastMediaManager</code> , créez une sous-classe et écrasez certaines méthodes clés :</p>

<ul>
	<li>
	<pre>
<code class="language-java" translate="No">public void updateBrightcoveMediaController(boolean isRemote)</code></pre>

	<p>Cette méthode est appelée par le <code translate="No">GoogleCastComponent</code> lorsque la session change; c'est-à-dire lorsque la session a commencé ou s'est terminée. Lorsque la session a commencé, le <code translate="No">isRemote</code> le paramètre sera <code translate="No">true</code> et le <code translate="No">setupRemoteController</code> méthode est appelée. Sinon, le <code translate="No">isRemote</code> sera <code translate="No">false</code> et le <code translate="No">resetToLocalController</code> est appelé.</p>
	</li>
	<li>
	<pre>
<code class="language-java" translate="No">protected void setupRemoteController()</code></pre>

	<p>Cette méthode émet l'événement <code translate="No">EventType.SET_MEDIA_CONTROLLER_CONFIG</code> avec le <code translate="No">MediaControllerConfig</code> objet. Nous parlerons plus de <code translate="No">MediaControllerConfig</code> plus loin dans cette section. Cette méthode écoute également les <code translate="No">BrightcoveMediaController.CONTROL_BAR_CREATED</code> événement et réagit en appelant le <code translate="No">setupBrightcoveControlBar</code> méthode.</p>
	</li>
	<li>
	<pre>
<code class="language-java" translate="No">protected void resetToLocalController()</code></pre>

	<p>Cette méthode est responsable de la réinitialisation du <code translate="No">BrightcoveMediaController</code> à la disposition d'origine du contrôleur en émettant le <code translate="No">EventType.RESTORE_DEFAULT_MEDIA_CONTROLLER</code>.</p>
	</li>
	<li>
	<pre>
<code class="language-java" translate="No">protected void setupBrightcoveControlBar(BrightcoveControlBar controlBar)</code></pre>

	<p>Une fois la <code translate="No">BrightcoveMediaController</code> a été recréé avec la mise en page fournie dans le <code translate="No">MediaControllerConfig</code> , vous aurez accès au <code translate="No">BrightcoveControlBar</code> vue. De là, vous pouvez accéder à vos vues d'interface utilisateur, comme les boutons, où vous pouvez ajouter <code translate="No">OnClickListener</code>est à eux.</p>
	</li>
</ul>

<h4 id="Set_the_MediaControllerConfig">Définir le MediaControllerConfig</h4>

<p>Les <code translate="No">MediaControllerConfig</code> est une classe de configuration que vous pouvez utiliser pour modifier la disposition de contrôle par défaut du <code translate="No">BrightcoveMediaController</code> classer. Dans cette classe, vous pouvez définir la mise en page et le <code translate="No">OnTouchListener</code>. Une fois créé et configuré, vous pouvez émettre cet objet comme indiqué ci-dessous :</p>

<pre class="line-numbers">
<code class="language-java" translate="No">Map&lt;String, Object&gt; properties = new HashMap&lt;&gt;();
properties.put(Event.MEDIA_CONTROLLER_CONFIG, myMediaControllerConfig);
eventEmitter.emit(EventType.SET_MEDIA_CONTROLLER_CONFIG,properties);</code></pre>

<p>Le défaut <code translate="No">MediaControllerConfig</code> l'objet définit le <code translate="No">R.layout.cast_media_controller</code> comme la mise en page avec un seul <strong>Jouer</strong> bouton. Lorsque vous cliquez dessus, une boîte de dialogue s'ouvre avec deux options :</p>

<ul>
	<li><strong>joue maintenant</strong> - Lorsqu'il est sélectionné, le <code translate="No">loadMediaInfo()</code> est appelée et la vidéo sera chargée et lue dans Chromecast.</li>
	<li><strong>Ajouter à la liste</strong> - Lorsqu'il est sélectionné, le <code translate="No">addMediaInfo()</code> est appelée et la vidéo est ajoutée à la fin de la file d'attente.</li>
</ul>

<aside class="bcls-aside bcls-aside--information">Si vous souhaitez conserver la même interface utilisateur mais souhaitez charger des informations supplémentaires dans la vidéo en cours de diffusion, vous pouvez écraser le <code translate="No">loadMediaInfo()</code> et <code translate="No">addMediaInfo()</code> méthodes et personnaliser les informations que vous ajoutez au <code translate="No">MediaInfo</code> objet.</aside>

<h4 id="Overwrite_the_control_bar_setup">Écraser la configuration de la barre de contrôle</h4>

<p>Lorsque la disposition de votre contrôleur multimédia est définie en émettant le <code translate="No">MediaControllerConfig</code> , les <code translate="No">BrightcoveControlBar</code> vue sera créée et le <code translate="No">BrightcoveCastMediaManager.setupBrightcoveControlBar()</code> méthode sera appelée. C'est ici que vous pouvez obtenir vos composants d'interface utilisateur par Id et ajouter les écouteurs appropriés.</p>

<pre class="line-numbers">
<code class="language-java" translate="No">@Override
protected void setupBrightcoveControlBar(BrightcoveControlBar controlBar) {
   Button playButton = controlBar.findViewById(R.id.cast_play);
   if (playButton != null) {
       playButton.setOnClickListener(new View.OnClickListener() {...});
   }
}</code></pre>

</section>

<!-- <section class="bcls-section">
<h2 id="Cast_plugin_dependencies">Cast plugin dependencies</h2>

<p>The Cast plugin depends on the ExoPlayer Cast Extension:</p>

<pre>
<code class="language-java" translate="No">compile 'com.google.android.exoplayer:extension-cast:2.7.0'</code></pre>

<p>The extension have several dependencies which are listed in the table below:</p>

<table class="bcls-table">
	<thead class="bcls-table__head">
		<tr>
			<th>Name</th>
			<th>Full notation and current version</th>
		</tr>
	</thead>
	<tbody class="bcls-table__body">
		<tr>
			<td><a href="https://developer.android.com/reference/android/support/v7/media/MediaRouter">Mediarouter v7</a></td>
			<td><code translate="No">com.android.support:mediarouter-v7:27.0.0</code></td>
		</tr>
		<tr>
			<td><a href="https://developer.android.com/topic/libraries/support-library/packages#v7">Appcompat v7</a></td>
			<td><code translate="No">com.android.support:appcompat-v7:27.0.0</code></td>
		</tr>
		<tr>
			<td><a href="https://developer.android.com/topic/libraries/support-library/packages#v4">Support v4</a></td>
			<td><code translate="No">com.android.support:support-v4:27.0.0</code></td>
		</tr>
		<tr>
			<td><a href="https://developers.google.com/android/reference/com/google/android/gms/cast/package-summary">Cast Framework</a></td>
			<td><code translate="No">com.google.android.gms:play-services-cast-framework:11.4.2</code></td>
		</tr>
		<tr>
			<td><a href="https://github.com/google/ExoPlayer/tree/release-v2/library/core">ExoPlayer Core</a></td>
			<td><code translate="No">com.google.android.exoplayer:exoplayer-core:2.7.0</code></td>
		</tr>
		<tr>
			<td><a href="https://github.com/google/ExoPlayer/tree/release-v2/library/ui">ExoPlayer UI</a></td>
			<td><code translate="No">com.google.android.exoplayer:exoplayer-ui:2.7.0</code></td>
		</tr>
	</tbody>
</table>
</section> -->

<!-- <section class="bcls-section">
<h2 id="Limitations">Limitations</h2>

<p>With the current Brightcove Native SDK for Android release, certain Video Cloud features have limited support, or are not supported when using the Cast plugin with the Google sample receiver app:</p>

<ul>
	<li>Captions
	<ul>
		<li>Only in-manifest captions with Dynamic Delivery DASH display as expected when using the Cast plugin with the Google sample receiver app.</li>
		<li>In-manifest captions with HLS and Sidecar captions in any video configuration are not currently supported when using the Cast plugin with the Google sample receiver app.</li>
	</ul>
	</li>
	<li>Widevine Modular DRM is not supported when using the Cast plugin with the Google sample receiver app.</li>
	<li>Multiple Audio Tracks are not supported when using the Cast plugin with the Google sample receiver app.</li>
	<li>Client-side and Server-side Advertising is not supported when using the Cast plugin with the Google sample receiver app.</li>
	<li>Live and Live DVR streams are not supported when using the Cast plugin with the Google sample receiver app.</li>
	<li>Casting Offline Videos is not currently supported. When you download a video, the Source url is changed to point to a local file. If you then try casting that Video, the plugin will pick the local source but the Chromecast device will not be able to request the video.</li>
</ul>

<h3 id="Handling_currently_unsupported_features">Handling currently unsupported features</h3>

<p>The Cast plugin is responsible for gathering MediaInfo data, such as video url, title, description, and poster image, and casting it to your connected Chromecast device. Note that successful playback of the Video and display of the metadata ultimately depends on the Application Receiver.</p>

<p>It is the developer's responsibility to evaluate the Application Receiver for what it supports, and its limitations. Therefore, the developer should implement UI elements that inform the user what can or can’t be cast. For example, if the Application Receiver does not support Videos with DRM or Ads, your Android app must handle these scenarios.</p>
</section> -->

<section class="bcls-section">
<h2 id="Known_Issues">Problèmes connus</h2>

<h3>Android 9</h3>

<p>Lorsque vous utilisez Chromecast avec Android 9 et versions ultérieures, vous devez inclure un <code translate="No">FOREGROUND_SERVICE</code> autorisation. Cela permet à l'application d'utiliser des notifications pour contrôler une session de diffusion lorsque l'application est en arrière-plan et ramenée au premier plan.</p>

<p>Les <code translate="No">uses-permission</code> La balise doit être ajoutée à l'application <strong>AndroidManifest.xml</strong> fichier, comme suit :</p>

<pre>
<code class="language-java" translate="No">&lt;uses-permission android:name="android.permission.FOREGROUND_SERVICE"/&gt;</code></pre>

<!-- <h3>Volume control</h3>

<p>The volume control in the Cast dialog may not decrease all the way to zero on the sending device. When using the volume control in the Cast dialog, or the volume buttons on the sending device, the displayed volume level may jump back up slightly to show a non-zero value on the sender. However, the receiver will display a non-zero value. This is a behavior with the Google Cast dialog, and not within the Brightcove Android SDK.</p> -->

<h4>Services Google Play</h4>

<p>La connexion Casting peut ne pas être créée si la version des services Google Play de l'expéditeur n'est pas à jour. Lorsque les services Google Play de l'expéditeur, en particulier le cadre des services Cast, sont obsolètes, vous pouvez ne pas réussir à créer une connexion Cast. Ceci est résolu en mettant à jour les services Google Play de l'expéditeur via le Google Play Store.</p>
</section>
</article>