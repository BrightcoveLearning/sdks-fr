---
title: 'Redimensionner la vue vidéo avec le SDK natif pour Android' la
description: Dans cette rubrique, vous apprendrez comment redimensionner/étirer la vue vidéo interne pour remplir le <code translate="No">BrightcoveVideoView</code> lorsque vous travaillez avec le SDK natif pour Android.
parent: Framework 
grandparent: Android Development
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>

<section class="bcls-section">
<h2 id="Overview">Aperçu</h2>
<p>En tant que développeur, vous pouvez modifier le comportement par défaut d'affichage de la vidéo dans la vue vidéo. Vous pouvez redimensionner/étirer la vue vidéo interne (<code translate="No">SurfaceView</code>/<code translate="No">TextureView</code> ) pour remplir le <code translate="No">BrightcoveVideoView</code> (<code translate="No">FrameLayout</code>). Pour ce faire, vous pouvez écouter le <code translate="No">EventType.VIDEO_SIZE_KNOWN</code> événement, faites quelques calculs et définissez les valeurs d'affichage.</p>
<p>Il existe deux manières de modifier la vue vidéo :</p>
<ul>
  <li>
    <a href="#Resizing_the_container">Redimensionner le conteneur (<code translate="No">BaseVideoView</code>/<code translate="No">FrameLayout</code>)</a>
  </li>
  <li>
    <a href="#Resizing_the_video">Redimensionner la vidéo (<code translate="No">SurfaceView</code>)</a>
  </li>
</ul>
</section>

<section class="bcls-section">
<h2 id="Resizing_the_container">Redimensionner le conteneur</h2>
<p>Vous souhaiterez peut-être développer une application qui définit la vue vidéo pour qu'elle s'adapte à tout l'écran de l'appareil en mode portrait. Vous pouvez le faire en redimensionnant le conteneur (<code translate="No">BaseVideoView</code>/<code translate="No">FrameLayout</code>).</p>
<aside class="bcls-aside bcls-aside--information">Parce que le <code translate="No">Video</code> hauteur est initialement inconnue, elle correspondra à sa taille de vue parent (l'écran entier dans le <a href="https://github.com/BrightcoveOS/android-player-samples/tree/master/brightcove-exoplayer/BasicSampleApp/src/main">BasicSampleApp</a> ) jusqu'à ce que le <code translate="No">VIDEO_SIZE_KNOWN</code> l'événement est déclenché. Puis le <code translate="No">BaseVideoView</code> enveloppera le <code translate="No">SurfaceView</code>. Lors du redimensionnement du conteneur, vous pouvez voir un scintillement initial.</aside>

<h3>Définir la propriété du conteneur</h3>
<p>Si vous voyez des marges noires autour de votre vidéo, vous pouvez essayer de régler le <code translate="No">BrightcoveVideoView</code> <code translate="No">layout-height</code>.</p>
<ol class="bcls-tasklist">
    <li>Ouvrir le XML <strong>disposition</strong> déposer.</li>
    <li>Met le <code translate="No">BrightcoveVideoView layout-height</code> à <code translate="No">wrap_content</code>.</li>
    <li>Vous pouvez rencontrer un scintillement initial comme expliqué dans la note ci-dessus.</li>
</ol>

<h3>Définir la taille de la vue vidéo</h3>
<p>Une autre façon de contrôler la vue vidéo consiste à définir la taille par programmation.</p>
<ol class="bcls-tasklist-restart">
    <li>Pour minimiser le scintillement initial, essayez de régler le <code translate="No">layout_height</code> à une valeur spécifique (par exemple 280dp). L'objectif est que la hauteur réglée soit proche de la hauteur calculée.</li>
    <li>Écoutez le <code translate="No">EventType.VIDEO_SIZE_KNOWN</code> un événement.</li>
    <li>Obtenir le <code translate="No">Event.VIDEO_WIDTH</code> et <code translate="No">Event.VIDEO_HEIGHT</code></li>
    <li>Avec ces valeurs, déterminez le rapport hauteur/largeur.</li>
    <li>Utilisez le rapport hauteur/largeur pour calculer la largeur et la hauteur de l'écran.</li>
</ol>
<p>Cette solution ressemblera à ceci :</p>
<pre class="line-numbers">
<code class="language-java" translate="No">//Event sent when we know the Video dimensions.
eventEmitter.on(EventType.VIDEO_SIZE_KNOWN, new EventListener() {
  @Override
  public void processEvent(Event event) {
    // Get the width and height
    float width = event.getIntegerProperty(Event.VIDEO_WIDTH);
    float height = event.getIntegerProperty(Event.VIDEO_HEIGHT);
    float aspectRatio = height/width;

    //Get the display metrics
    DisplayMetrics metrics = new DisplayMetrics();
    getWindowManager().getDefaultDisplay().getMetrics(metrics);
    int videoWidth = metrics.widthPixels; // We cover the entire display's width
    int videoHeight = (int) (videoWidth*aspectRatio); //Calculate the height based on the ratio

    // Set the layout params
    brightcoveVideoView.setLayoutParams(new FrameLayout.LayoutParams(videoWidth,videoHeight));
  }
});
</code></pre>
<p>Lors de l'ajout d'une vue, vous devrez remplacer les paramètres de mise en page. Pour plus de détails, consultez le <a href="/android/framework/android-adding-viewmanaging-layout.html">Android: Ajouter une vue/Gérer la mise en page</a> document.</p>
</section>

<section class="bcls-section">
<h2 id="Resizing_the_video">Redimensionner la vidéo</h2>
<p>Vous voudrez peut-être implémenter un double-clic qui remplit l'écran. Cela prendrait une vidéo 16:9 et remplirait l'écran sur un appareil 18:9 ou 19:9.</p>
<p>Vous pouvez le faire en redimensionnant la vidéo réelle (<code translate="No">SurfaceView</code>).</p>
<ol class="bcls-tasklist-restart">
    <li>
      <p>
        Si vous réglez la largeur et la hauteur sur le <code translate="No">renderView</code> pour correspondre à la taille de l'affichage de l'appareil, la vidéo sera redimensionnée pour correspondre à l'écran entier.
      </p>
      <aside class="bcls-aside bcls-aside--information">Cela n'étire pas la vidéo réelle. Nous le ferons à l'étape suivante.</aside>
      <pre class="line-numbers">
<code class="language-java" translate="No">//Event sent when we know the Video dimensions.
eventEmitter.on(EventType.VIDEO_SIZE_KNOWN, new EventListener() {
  @Override
  public void processEvent(Event event) {
    // Get the width and height
    float width = event.getIntegerProperty(Event.VIDEO_WIDTH);
    float height = event.getIntegerProperty(Event.VIDEO_HEIGHT);
    float aspectRatio = height/width;

    //Get the display metrics
    DisplayMetrics metrics = new DisplayMetrics();
    getWindowManager().getDefaultDisplay().getMetrics(metrics);
    int videoWidth = metrics.widthPixels; // We cover the entire display's width
    int videoHeight = (int) (videoWidth*aspectRatio); //Calculate the height based on the ratio

    // Set the video size
    brightcoveVideoView.getRenderView().setVideoSize(videoWidth, videoHeight);
  }
});
</code></pre>
    </li>
    <li>
      <p>
        Le code ci-dessous met à jour la vue vidéo sous-jacente (par exemple <code translate="No">SurfaceView</code> ) pour correspondre à son parent <code translate="No">BaseVideoView</code> (<code translate="No">FrameLayout</code>). Il y a plusieurs choses à garder à l'esprit :
      </p>
      <ul>
        <li>
          Vous devez écouter le <code translate="No">VIDEO_SIZE_KNOWN</code> événement lors de l'entrée et de la sortie du plein écran, et lors de la rotation de l'appareil.
        </li>
        <li>
          Vous devez décider quand mettre à jour votre vue pour les conditions ci-dessus.
        </li>
      </ul>
  <p>Un scénario pourrait être que vous définissiez le <code translate="No">BaseVideoView layout_height</code> à <code translate="No">280dp</code> puis redimensionner le <code translate="No">SurfaceView</code> correspondre <code translate="No">280dp</code>. Le rapport hauteur/largeur sera légèrement modifié. Si un utilisateur passe en plein écran en mode portrait et <code translate="No">updateVideoViewMatchToParent()</code> est appelé, alors les deux <code translate="No">BaseVideoView</code> et <code translate="No">SurfaceView</code> remplira l'écran de l'appareil et le rapport hauteur/largeur de la vidéo sera légèrement modifié.</p>
<pre class="line-numbers">
<code class="language-java" translate="No">public void updateVideoViewMatchToParent(@NonNull BaseVideoView brightcoveVideoView) {
  RenderView renderView = brightcoveVideoView.getRenderView();
  if (renderView != null) {
      renderView.setVideoSize(brightcoveVideoView.getWidth(), brightcoveVideoView.getHeight());
  }
}
</code></pre>
<p>Pour détecter le double tap, vous pouvez utiliser le <a href="https://developer.android.com/reference/android/view/GestureDetector.OnDoubleTapListener">GestureDetector.OnDoubleTapListener</a> interface. Pour plus de détails, consultez le <a href="https://developer.android.com/training/gestures/detector">Détecter les gestes courants</a> document.</p>
    </li>
</ol>
<p>Si vous souhaitez étirer la vidéo sans prendre en compte le rapport hauteur/largeur (sans recadrer la vidéo), vous pouvez essayer ceci :</p>
<pre class="line-numbers">
<code class="language-java" translate="No">eventEmitter.on(EventType.VIDEO_SIZE_KNOWN, new EventListener() {
  @Override
  public void processEvent(Event event) {
      //Get the display metrics
      DisplayMetrics metrics = new DisplayMetrics();
      getWindowManager().getDefaultDisplay().getMetrics(metrics);

      int videoHeight = metrics.heightPixels;
      int videoWidth = metrics.widthPixels;
      brightcoveVideoView.getRenderView().setVideoSize(videoWidth, videoHeight);
  }
});
</code></pre>
<aside class="bcls-aside bcls-aside--information"> Il est important que le <code translate="No">BaseVideoView</code> les usages <code translate="No">match_parent</code> pour les deux <code translate="No">layout_width</code> et <code translate="No">layout_height</code> pour le <code translate="No">SurfaceView</code> pour remplir l'écran de l'appareil.</aside>

<p>Gardez à l'esprit que les valeurs que vous obtenez sont affectées par l'orientation de l'appareil. Pour étirer la vidéo en mode portrait et paysage, procédez comme suit :</p>
<ol class="bcls-tasklist-restart">
    <li>
      <p>
        Remplacer ce qui suit <code translate="No">Activity</code>:
      </p> 
      <pre>
<code class="language-java" translate="No">public void onConfigurationChanged(Configuration configuration)</code>
</pre>
    </li>
    <li>Réinitialiser la taille de la vidéo.</li>
</ol>
</section>

</article>